<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=UTF-8">
<meta name=Generator content="Microsoft Word 14 (filtered)">
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"Franklin Gothic Demi";
	panose-1:2 11 7 3 2 1 2 2 2 4;}
@font-face
	{font-family:"Lucida Sans Typewriter";
	panose-1:2 11 5 9 3 5 4 3 2 4;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
h1
	{mso-style-link:"Heading 1 Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:24.0pt;
	margin-left:0in;
	line-height:115%;
	page-break-after:avoid;
	font-size:36.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	font-variant:small-caps;
	font-weight:bold;}
h2
	{mso-style-link:"Heading 2 Char";
	margin-top:10.0pt;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	line-height:115%;
	page-break-after:avoid;
	font-size:16.0pt;
	font-family:"Calibri","sans-serif";
	color:#1F497D;
	font-weight:bold;}
h3
	{mso-style-link:"Heading 3 Char";
	margin-top:10.0pt;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	line-height:115%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Calibri","sans-serif";
	color:#1F497D;
	font-weight:bold;
	font-style:italic;}
p.MsoToc1, li.MsoToc1, div.MsoToc1
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:0in;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.MsoToc2, li.MsoToc2, div.MsoToc2
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:11.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.MsoToc3, li.MsoToc3, div.MsoToc3
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:22.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.MsoToc4, li.MsoToc4, div.MsoToc4
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:33.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoToc5, li.MsoToc5, div.MsoToc5
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:44.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoToc6, li.MsoToc6, div.MsoToc6
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:55.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoToc7, li.MsoToc7, div.MsoToc7
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:66.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoToc8, li.MsoToc8, div.MsoToc8
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:77.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoToc9, li.MsoToc9, div.MsoToc9
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:88.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoHeader, li.MsoHeader, div.MsoHeader
	{mso-style-link:"Header Char";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.MsoFooter, li.MsoFooter, div.MsoFooter
	{mso-style-link:"Footer Char";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.MsoCaption, li.MsoCaption, div.MsoCaption
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	text-align:center;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoTitle, li.MsoTitle, div.MsoTitle
	{mso-style-link:"Title Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:15.0pt;
	margin-left:0in;
	border:none;
	padding:0in;
	font-size:36.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	letter-spacing:.25pt;}
p.MsoTitleCxSpFirst, li.MsoTitleCxSpFirst, div.MsoTitleCxSpFirst
	{mso-style-link:"Title Char";
	margin:0in;
	margin-bottom:.0001pt;
	border:none;
	padding:0in;
	font-size:36.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	letter-spacing:.25pt;}
p.MsoTitleCxSpMiddle, li.MsoTitleCxSpMiddle, div.MsoTitleCxSpMiddle
	{mso-style-link:"Title Char";
	margin:0in;
	margin-bottom:.0001pt;
	border:none;
	padding:0in;
	font-size:36.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	letter-spacing:.25pt;}
p.MsoTitleCxSpLast, li.MsoTitleCxSpLast, div.MsoTitleCxSpLast
	{mso-style-link:"Title Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:15.0pt;
	margin-left:0in;
	border:none;
	padding:0in;
	font-size:36.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	letter-spacing:.25pt;}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;}
p
	{margin-right:0in;
	margin-left:0in;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
p.MsoAcetate, li.MsoAcetate, div.MsoAcetate
	{mso-style-link:"Balloon Text Char";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:8.0pt;
	font-family:"Tahoma","sans-serif";}
p.MsoNoSpacing, li.MsoNoSpacing, div.MsoNoSpacing
	{mso-style-link:"No Spacing Char";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.MsoListParagraph, li.MsoListParagraph, div.MsoListParagraph
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:.5in;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.MsoListParagraphCxSpFirst, li.MsoListParagraphCxSpFirst, div.MsoListParagraphCxSpFirst
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.MsoListParagraphCxSpMiddle, li.MsoListParagraphCxSpMiddle, div.MsoListParagraphCxSpMiddle
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.MsoListParagraphCxSpLast, li.MsoListParagraphCxSpLast, div.MsoListParagraphCxSpLast
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:.5in;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.MsoTocHeading, li.MsoTocHeading, div.MsoTocHeading
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:24.0pt;
	margin-left:0in;
	line-height:115%;
	page-break-after:avoid;
	font-size:36.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	font-variant:small-caps;
	font-weight:bold;}
span.Heading1Char
	{mso-style-name:"Heading 1 Char";
	mso-style-link:"Heading 1";
	font-family:"Franklin Gothic Demi","sans-serif";
	font-variant:small-caps;
	font-weight:bold;}
span.Heading2Char
	{mso-style-name:"Heading 2 Char";
	mso-style-link:"Heading 2";
	font-family:"Times New Roman","serif";
	color:#1F497D;
	font-weight:bold;}
span.Heading3Char
	{mso-style-name:"Heading 3 Char";
	mso-style-link:"Heading 3";
	font-family:"Times New Roman","serif";
	color:#1F497D;
	font-weight:bold;
	font-style:italic;}
span.BalloonTextChar
	{mso-style-name:"Balloon Text Char";
	mso-style-link:"Balloon Text";
	font-family:"Tahoma","sans-serif";}
span.Definition
	{mso-style-name:Definition;
	font-family:"Calibri","sans-serif";
	font-weight:bold;}
span.NoSpacingChar
	{mso-style-name:"No Spacing Char";
	mso-style-link:"No Spacing";
	font-family:"Times New Roman","serif";}
span.URL
	{mso-style-name:URL;
	text-decoration:underline;}
span.Literal
	{mso-style-name:Literal;
	font-family:"Lucida Sans Typewriter";}
p.TopicsCoveredbox, li.TopicsCoveredbox, div.TopicsCoveredbox
	{mso-style-name:"Topics Covered box";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	background:#DBE5F1;
	border:none;
	padding:0in;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.TopicsCoveredboxCxSpFirst, li.TopicsCoveredboxCxSpFirst, div.TopicsCoveredboxCxSpFirst
	{mso-style-name:"Topics Covered boxCxSpFirst";
	margin:0in;
	margin-bottom:.0001pt;
	background:#DBE5F1;
	border:none;
	padding:0in;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.TopicsCoveredboxCxSpMiddle, li.TopicsCoveredboxCxSpMiddle, div.TopicsCoveredboxCxSpMiddle
	{mso-style-name:"Topics Covered boxCxSpMiddle";
	margin:0in;
	margin-bottom:.0001pt;
	background:#DBE5F1;
	border:none;
	padding:0in;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.TopicsCoveredboxCxSpLast, li.TopicsCoveredboxCxSpLast, div.TopicsCoveredboxCxSpLast
	{mso-style-name:"Topics Covered boxCxSpLast";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	background:#DBE5F1;
	border:none;
	padding:0in;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.CodeExample, li.CodeExample, div.CodeExample
	{mso-style-name:"Code Example";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:12.0pt;
	margin-left:0in;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.CodeExampleCxSpFirst, li.CodeExampleCxSpFirst, div.CodeExampleCxSpFirst
	{mso-style-name:"Code ExampleCxSpFirst";
	margin:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.CodeExampleCxSpMiddle, li.CodeExampleCxSpMiddle, div.CodeExampleCxSpMiddle
	{mso-style-name:"Code ExampleCxSpMiddle";
	margin:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.CodeExampleCxSpLast, li.CodeExampleCxSpLast, div.CodeExampleCxSpLast
	{mso-style-name:"Code ExampleCxSpLast";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:12.0pt;
	margin-left:0in;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SourceCode, li.SourceCode, div.SourceCode
	{mso-style-name:"Source Code";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:12.0pt;
	margin-left:0in;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SourceCodeCxSpFirst, li.SourceCodeCxSpFirst, div.SourceCodeCxSpFirst
	{mso-style-name:"Source CodeCxSpFirst";
	margin:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SourceCodeCxSpMiddle, li.SourceCodeCxSpMiddle, div.SourceCodeCxSpMiddle
	{mso-style-name:"Source CodeCxSpMiddle";
	margin:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SourceCodeCxSpLast, li.SourceCodeCxSpLast, div.SourceCodeCxSpLast
	{mso-style-name:"Source CodeCxSpLast";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:12.0pt;
	margin-left:0in;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SampleRun, li.SampleRun, div.SampleRun
	{mso-style-name:"Sample Run";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:12.0pt;
	margin-left:0in;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SampleRunCxSpFirst, li.SampleRunCxSpFirst, div.SampleRunCxSpFirst
	{mso-style-name:"Sample RunCxSpFirst";
	margin:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SampleRunCxSpMiddle, li.SampleRunCxSpMiddle, div.SampleRunCxSpMiddle
	{mso-style-name:"Sample RunCxSpMiddle";
	margin:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SampleRunCxSpLast, li.SampleRunCxSpLast, div.SampleRunCxSpLast
	{mso-style-name:"Sample RunCxSpLast";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:12.0pt;
	margin-left:0in;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
span.SampleRunResponse
	{mso-style-name:"Sample Run Response";
	color:#1F497D;
	font-weight:bold;}
span.SourceLineNumber
	{mso-style-name:"Source Line Number";
	color:#7F7F7F;}
span.SourceCodeComment
	{mso-style-name:"Source Code Comment";
	color:#7F7F7F;}
span.HeaderChar
	{mso-style-name:"Header Char";
	mso-style-link:Header;
	font-family:"Times New Roman","serif";}
span.FooterChar
	{mso-style-name:"Footer Char";
	mso-style-link:Footer;
	font-family:"Times New Roman","serif";}
p.TableHeading, li.TableHeading, div.TableHeading
	{mso-style-name:"Table Heading";
	margin:0in;
	margin-bottom:.0001pt;
	text-align:center;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";
	font-weight:bold;}
p.TableListing, li.TableListing, div.TableListing
	{mso-style-name:"Table Listing";
	margin:0in;
	margin-bottom:.0001pt;
	text-align:center;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.ImportantNote, li.ImportantNote, div.ImportantNote
	{mso-style-name:"Important Note";
	margin-top:0in;
	margin-right:.5in;
	margin-bottom:8.0pt;
	margin-left:.5in;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
span.StrongBoxed
	{mso-style-name:"Strong & Boxed";
	border:solid windowtext 1.0pt;
	padding:0in;
	font-weight:bold;}
span.TitleChar
	{mso-style-name:"Title Char";
	mso-style-link:Title;
	font-family:"Franklin Gothic Demi","sans-serif";
	letter-spacing:.25pt;}
p.ChapterNumber, li.ChapterNumber, div.ChapterNumber
	{mso-style-name:"Chapter Number";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:26.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";}
p.Body, li.Body, div.Body
	{mso-style-name:Body;
	margin-top:0in;
	margin-right:0in;
	margin-bottom:8.0pt;
	margin-left:0in;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.BodyFirst, li.BodyFirst, div.BodyFirst
	{mso-style-name:"Body First";
	margin:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
span.Keycap
	{mso-style-name:Keycap;
	font-variant:small-caps;
	color:blue;}
span.FigureImageBorder
	{mso-style-name:"Figure Image Border";
	border:solid windowtext 1.0pt;
	padding:0in;}
p.SourceCodeFilename, li.SourceCodeFilename, div.SourceCodeFilename
	{mso-style-name:"Source Code Filename";
	margin:0in;
	margin-bottom:.0001pt;
	text-align:right;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SourceCodeFilenameCxSpFirst, li.SourceCodeFilenameCxSpFirst, div.SourceCodeFilenameCxSpFirst
	{mso-style-name:"Source Code FilenameCxSpFirst";
	margin:0in;
	margin-bottom:.0001pt;
	text-align:right;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SourceCodeFilenameCxSpMiddle, li.SourceCodeFilenameCxSpMiddle, div.SourceCodeFilenameCxSpMiddle
	{mso-style-name:"Source Code FilenameCxSpMiddle";
	margin:0in;
	margin-bottom:.0001pt;
	text-align:right;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SourceCodeFilenameCxSpLast, li.SourceCodeFilenameCxSpLast, div.SourceCodeFilenameCxSpLast
	{mso-style-name:"Source Code FilenameCxSpLast";
	margin:0in;
	margin-bottom:.0001pt;
	text-align:right;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Lucida Sans Typewriter";}
p.Non-TOCHeading3, li.Non-TOCHeading3, div.Non-TOCHeading3
	{mso-style-name:"Non-TOC Heading 3";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	line-height:115%;
	font-size:14.0pt;
	font-family:"Calibri","sans-serif";
	color:#1F497D;
	font-weight:bold;
	font-style:italic;}
.MsoChpDefault
	{font-family:"Calibri","sans-serif";}
.MsoPapDefault
	{margin-bottom:10.0pt;
	line-height:115%;}
@page WordSection1
	{size:8.5in 11.0in;
	margin:1.0in 1.0in 1.0in 1.0in;}
div.WordSection1
	{page:WordSection1;}
 /* List Definitions */
 ol
	{margin-bottom:0in;}
ul
	{margin-bottom:0in;}
-->
</style>

</head>

<body lang=EN-US link=blue vlink=purple>

<div class=WordSection1>

<table class=MsoTableGrid border=0 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=101 rowspan=2 valign=top style='width:60.85pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=ChapterNumber><img width=84 height=96 id="Picture 159"
  src="18_files/image001.jpg"></p>
  </td>
  <td width=637 valign=top style='width:381.95pt;border:none;border-bottom:
  solid windowtext 1.0pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=ChapterNumber>Capítulo 18</p>
  </td>
 </tr>
 <tr>
  <td width=637 valign=top style='width:381.95pt;border:none;padding:0in 5.4pt 0in 5.4pt'>
  <h1 style='line-height:normal'><a name="_Toc428130726"><span lang=ES-MX
  style='font-variant:normal !important;text-transform:uppercase'>Detección de
  Colisiones Y Entradas de Teclado/Ratón</span></a></h1>
  </td>
 </tr>
</table>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt;
background:#DBE5F1'>

<p class=TopicsCoveredboxCxSpFirst style='background:#DBE5F1;border:none;
padding:0in'><span lang=ES-MX>Temas Tratados En Este Capítulo:</span></p>

<p class=TopicsCoveredboxCxSpMiddle style='margin-left:.25in;text-indent:-.25in;
background:#DBE5F1;border:none;padding:0in'><span style='font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Detección de Colisiones</p>

<p class=TopicsCoveredboxCxSpMiddle style='margin-left:.25in;text-indent:-.25in;
background:#DBE5F1;border:none;padding:0in'><span lang=ES-MX style='font-family:
Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=ES-MX>No Modifiques una Lista Mientras Iteras Sobre
Ella</span></p>

<p class=TopicsCoveredboxCxSpMiddle style='margin-left:.25in;text-indent:-.25in;
background:#DBE5F1;border:none;padding:0in'><span lang=ES-MX style='font-family:
Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=ES-MX>Entrada de Teclado en Pygame</span></p>

<p class=TopicsCoveredboxCxSpLast style='margin-left:.25in;text-indent:-.25in;
background:#DBE5F1;border:none;padding:0in'><span lang=ES-MX style='font-family:
Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=ES-MX>Entrada de Ratón en Pygame</span></p>

</div>

<p class=Body><span lang=ES-MX>Detección de colisiones es darse cuenta cuando
dos cosas en la pantalla se han tocado (es decir, han colisionado). Por
ejemplo, si el jugador toca un enemigo puede perder salud. O quizá el programa
necesita saber cuando el jugador toca una moneda para recogerla
automáticamente. Detección de colisiones puede ayudar a determinar si el
personaje del juego está parado sobre el suelo o si no hay nada más que aire
debajo de él.</span></p>

<p class=Body><span lang=ES-MX>En nuestros juegos, la detección de colisiones
determinará si dos rectángulos se superponen o no. Nuestro próximo programa de
ejemplo cubrirá esta técnica básica.</span></p>

<p class=Body><span lang=ES-MX>Más adelante en este capítulo, veremos cómo
nuestros programas Pygame pueden recibir entradas del usuario a través del
teclado o del ratón. Es un poco más complicado que llamar a la función </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>input()</span></span><span
lang=ES-MX> como hicimos para nuestros programas de texto. Pero usar el teclado
es mucho más interactivo en programas GUI. Y usar el ratón ni siquiera es
posible en nuestros juegos de texto. Estos dos conceptos harán que tus juegos
sean mucho más emocionantes.</span></p>

<h2><a name="_Toc428130727"><span lang=ES-MX>Código Fuente del Programa de
Detección de Colisiones</span></a></h2>

<p class=Body><span lang=ES-MX>Gran parte de este código es similar al programa
de animación, de modo que omitiremos la explicación del movimiento y los
rebotes. (Ve el programa de animación en el Capítulo 17 para esta explicación).
Un rebotín rebotará contra los bordes de la ventana. Una lista de objetos Rect
representará cuadrados de comida.</span></p>

<p class=Body><span lang=ES-MX>En cada interacción durante el bucle del juego,
el programa leerá cada objeto Rect en la lista y dibujará un cuadrado verde en
la ventana. Cada cuarenta iteraciones del bucle del juego agregaremos un nuevo
objeto Rect a la lista de modo que aparezcan constantemente nuevos cuadrados de
comida en la pantalla.</span></p>

<p class=Body><span lang=ES-MX>El rebotín es representado por un diccionario.
El diccionario tiene una clave llamada </span><span class=Literal><span
lang=ES-MX style='font-size:9.0pt;line-height:115%'>'rect'</span></span><span
lang=ES-MX> (cuyo valor es un objeto </span><span class=Literal><span
lang=ES-MX style='font-size:9.0pt;line-height:115%'>pygame.Rect</span></span><span
lang=ES-MX>) y una clave llamada </span><span class=Literal><span lang=ES-MX
style='font-size:9.0pt;line-height:115%'>'dir'</span></span><span lang=ES-MX>
(cuyo valor es una de las variables constantes de dirección como en el programa
de Animación del capítulo anterior).</span></p>

<p class=Body><span lang=ES-MX>A medida que el rebotín rebota por la ventana,
comprobamos si colisiona con alguno de los cuadrados de comida. Si es así,
borramos ese cuadrado de comida de modo que ya no sea dibujado en la pantalla.
Esto dará la impresión de que el rebotín “se come” los cuadrados de comida en
la ventana.</span></p>

<p class=Body><span lang=ES-MX>Escribe lo siguiente en un nuevo archivo y guárdalo
como <em>detecciónColisión.py</em>. Si obtienes errores después de haber
copiado el código, compara el código que has escrito con el código del libro
usando la herramienta online diff en <span class=URL><u>http://invpy.com/es/diff/deteccionColision</u></span>.</span></p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeFilename>detecciónColisión.py</p>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>  1.</span> import
pygame, sys, random</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  2.</span> from
pygame.locals import *</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  3. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  4.</span> def verifSuperposiciónRects(rect1,
rect2):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  5.</span>     for
a, b in [(rect1, rect2), (rect2, rect1)]:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  </span><span
class=SourceLineNumber><span lang=ES-MX>6.</span></span><span lang=ES-MX>        
<span class=SourceCodeComment># Verifica si las esquinas de a se encuentran
dentro de b</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>  </span>7.</span>        
if ((puntoDentroDeRect(a.left, a.top, b)) or</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  8.</span>            
(puntoDentroDeRect(a.left, a.bottom, b)) or</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  9.</span>            
(puntoDentroDeRect(a.right, a.top, b)) or</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 10.</span>            
(puntoDentroDeRect(a.right, a.bottom, b))):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 11.</span>            
return True</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 12. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 13.</span>    
return False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 14. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 15.</span> def puntoDentroDeRect(x,
y, rect):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 16.</span>     if
(x &gt; rect.left) and (x &lt; rect.right) and (y &gt; rect.top) and (y &lt;
rect.bottom):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 17.</span>        
return True</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 18.</span>    
else:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 19.</span>        
return False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 20. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> </span><span
class=SourceLineNumber><span lang=ES-MX>21. </span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 22.</span></span><span
lang=ES-MX> <span class=SourceCodeComment># establece el juego</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 23.</span></span><span
lang=ES-MX> pygame.init()</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 24.</span></span><span
lang=ES-MX> relojPrincipal = pygame.time.Clock()</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 25.
</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 26.</span></span><span
lang=ES-MX> <span class=SourceCodeComment># establece la ventana</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 27.</span></span><span
lang=ES-MX> ANCHOVENTANA = 400</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 28.</span></span><span
lang=ES-MX> ALTOVENTANA = 400</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 29.</span></span><span
lang=ES-MX> superficieVentana = pygame.display.set_mode((ANCHOVENTANA, ALTOVENTANA),
0, 32)</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 30.</span></span><span
lang=ES-MX> pygame.display.set_caption('Deteccion de Colisiones')</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 31.
</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 32.</span></span><span
lang=ES-MX> <span class=SourceCodeComment># establece las variables de
dirección</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 33.</span></span><span
lang=ES-MX> ABAJOIZQUIERDA = 1</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 34.</span></span><span
lang=ES-MX> ABAJODERECHA = 3</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 35.</span></span><span
lang=ES-MX> ARRIBAIZQUIERDA = 7</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 36.</span></span><span
lang=ES-MX> ARRIBADERECHA = 9</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 37.
</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 38.</span></span><span
lang=ES-MX> VELOCIDADMOVIMIENTO = 4</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 39.
</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 40.</span></span><span
lang=ES-MX> <span class=SourceCodeComment># establece los colores</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 41.</span></span><span
lang=ES-MX> NEGRO = (0, 0, 0)</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 42.</span></span><span
lang=ES-MX> VERDE = (0, 255, 0)</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 43.</span></span><span
lang=ES-MX> BLANCO = (255, 255, 255)</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 44.
</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 45.</span></span><span
lang=ES-MX> <span class=SourceCodeComment># establece las estructuras de datos
de comida y rebotín</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 46.</span></span><span
lang=ES-MX> contadorComida = 0</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 47.</span></span><span
lang=ES-MX> NUEVACOMIDA = 40</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 48.</span></span><span
lang=ES-MX> TAMAÑOCOMIDA = 20</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 49.</span></span><span
lang=ES-MX> rebotín = {'rect':pygame.Rect(300, 100, 50, 50), 'dir':ARRIBAIZQUIERDA}</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> </span>50.</span>
comidas = []</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 51.</span> for i in
range(20):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 52.</span>     comidas.append(pygame.Rect(random.randint(0,
ANCHOVENTANA - TAMAÑOCOMIDA), random.randint(0, ALTOVENTANA - TAMAÑOCOMIDA),
TAMAÑOCOMIDA, TAMAÑOCOMIDA))</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> </span><span
class=SourceLineNumber><span lang=ES-MX>53. </span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 54.</span></span><span
lang=ES-MX> <span class=SourceCodeComment># corre el bucle de juego</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 55.</span></span><span
lang=ES-MX> while True:</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> </span>56.</span>    
<span class=SourceCodeComment># busca un evento QUIT</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 57.</span>     for evento
in pygame.event.get():</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 58.</span>        
if evento.type == QUIT:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> </span><span
class=SourceLineNumber><span lang=ES-MX>59.</span></span><span lang=ES-MX>            
pygame.quit()</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 60.</span></span><span
lang=ES-MX>             sys.exit()</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 61.
</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 62.</span></span><span
lang=ES-MX>     contadorComida += 1</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 63.</span></span><span
lang=ES-MX>     if contadorComida &gt;= NUEVACOMIDA:</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 64.</span></span><span
lang=ES-MX>         <span class=SourceCodeComment># añade nueva comida</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 65.</span></span><span
lang=ES-MX>         contadorComida = 0</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 66.</span></span><span
lang=ES-MX>         comidas.append(pygame.Rect(random.randint(0, ANCHOVENTANA -
TAMAÑOCOMIDA), random.randint(0, ALTOVENTANA - TAMAÑOCOMIDA), TAMAÑOCOMIDA,
TAMAÑOCOMIDA))</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 67.
</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 68.</span></span><span
lang=ES-MX>     <span class=SourceCodeComment># Dibuja el fondo NEGRO sobre la
superficie</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 69.</span></span><span
lang=ES-MX>     superficieVentana.fill(NEGRO)</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 70.
</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 71.</span></span><span
lang=ES-MX>     <span class=SourceCodeComment># Mueve la estructura de datos
rebotín</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 72.</span></span><span
lang=ES-MX>     if rebotín['dir'] == ABAJOIZQUIERDA:</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 73.</span></span><span
lang=ES-MX>         rebotín['rect'].left -= VELOCIDADMOVIMIENTO</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 74.</span></span><span
lang=ES-MX>         rebotín['rect'].top += VELOCIDADMOVIMIENTO</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 75.</span></span><span
lang=ES-MX>     if rebotín['dir'] == ABAJODERECHA:</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 76.</span></span><span
lang=ES-MX>         rebotín['rect'].left += VELOCIDADMOVIMIENTO</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 77.</span></span><span
lang=ES-MX>         rebotín['rect'].top += VELOCIDADMOVIMIENTO</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 78.</span></span><span
lang=ES-MX>     if rebotín['dir'] == ARRIBAIZQUIERDA:</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 79.</span></span><span
lang=ES-MX>         rebotín['rect'].left -= VELOCIDADMOVIMIENTO</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 80.</span></span><span
lang=ES-MX>         rebotín['rect'].top -= VELOCIDADMOVIMIENTO</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 81.</span></span><span
lang=ES-MX>     if rebotín['dir'] == ARRIBADERECHA:</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 82.</span></span><span
lang=ES-MX>         rebotín['rect'].left += VELOCIDADMOVIMIENTO</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 83.</span></span><span
lang=ES-MX>         rebotín['rect'].top -= VELOCIDADMOVIMIENTO</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 84.
</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 85.</span></span><span
lang=ES-MX>     <span class=SourceCodeComment># Verifica si rebotín se movió
fuera de la ventana</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 86.</span></span><span
lang=ES-MX>     if rebotín['rect'].top &lt; 0:</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 87.</span></span><span
lang=ES-MX>         <span class=SourceCodeComment># rebotín se movió por arriba
de la ventana</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 88.</span></span><span
lang=ES-MX>         if rebotín['dir'] == ARRIBAIZQUIERDA:</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 89.</span></span><span
lang=ES-MX>             rebotín['dir'] = ABAJOIZQUIERDA</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 90.</span></span><span
lang=ES-MX>         if rebotín['dir'] == ARRIBADERECHA:</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 91.</span></span><span
lang=ES-MX>             rebotín['dir'] = ABAJODERECHA</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> </span>92.</span>    
if rebotín['rect'].bottom &gt; ALTOVENTANA:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> </span><span
class=SourceLineNumber><span lang=ES-MX>93.</span></span><span lang=ES-MX>        
<span class=SourceCodeComment># rebotín se movió por debajo de la ventana</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 94.</span></span><span
lang=ES-MX>         if rebotín['dir'] == ABAJOIZQUIERDA:</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 95.</span></span><span
lang=ES-MX>             rebotín['dir'] = ARRIBAIZQUIERDA</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 96.</span></span><span
lang=ES-MX>         if rebotín['dir'] == ABAJODERECHA:</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 97.</span></span><span
lang=ES-MX>             rebotín['dir'] = ARRIBADERECHA</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 98.</span></span><span
lang=ES-MX>     if rebotín['rect'].left &lt; 0:</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 99.</span></span><span
lang=ES-MX>         <span class=SourceCodeComment># rebotín se movió por la
izquierda de la ventana</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>100.</span></span><span
lang=ES-MX>         if rebotín['dir'] == ABAJOIZQUIERDA:</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>101.</span></span><span
lang=ES-MX>             rebotín['dir'] = ABAJODERECHA</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>102.</span></span><span
lang=ES-MX>         if rebotín['dir'] == ARRIBAIZQUIERDA:</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>103.</span></span><span
lang=ES-MX>             rebotín['dir'] = ARRIBADERECHA</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>104.</span>     if rebotín['rect'].right
&gt; ANCHOVENTANA:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>105.</span></span><span
lang=ES-MX>         <span class=SourceCodeComment># rebotín se movió por la
derecha de la ventana</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>106.</span></span><span
lang=ES-MX>         if rebotín['dir'] == ABAJODERECHA:</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>107.</span></span><span
lang=ES-MX>             rebotín['dir'] = ABAJOIZQUIERDA</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>108.</span></span><span
lang=ES-MX>         if rebotín['dir'] == ARRIBADERECHA:</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>109.</span></span><span
lang=ES-MX>             rebotín['dir'] = ARRIBAIZQUIERDA</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>110.
</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>111.</span></span><span
lang=ES-MX>     <span class=SourceCodeComment># Dibuja a rebotín en la
superficie</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>112.</span></span><span
lang=ES-MX>     pygame.draw.rect(superficieVentana, BLANCO, rebotín['rect'])</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>113.
</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>114.</span></span><span
lang=ES-MX>     <span class=SourceCodeComment># Verifica si rebotín intersectó
algun cuadrado de comida</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>115.</span></span><span
lang=ES-MX>     for comida in comida[:]:</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>116.</span></span><span
lang=ES-MX>         if verifSuperposiciónRects(rebotín['rect'], comida):</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>117.</span></span><span
lang=ES-MX>             comidas.remove(comida)</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>118.
</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>119.</span></span><span
lang=ES-MX>     <span class=SourceCodeComment># Dibuja la comida</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>120.</span>     for
i in range(len(comidas)):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>121.</span></span><span
lang=ES-MX>         pygame.draw.rect(superficieVentana, VERDE, comidas[i])</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>122.
</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>123.</span></span><span
lang=ES-MX>     <span class=SourceCodeComment># Dibuja la ventana en la
pantalla</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>124.</span>    
pygame.display.update()</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>125.</span>     relojPrincipal.tick(40)</p>

</div>

<p class=Body><span lang=ES-MX>El programa se verá como la Figura 18-1. El
cuadrado rebotín irá rebotando por toda la pantalla. Al colisionar con los
cuadrados de comida verdes estos desaparecerán de la pantalla.</span></p>

<p class=MsoNormal align=center style='text-align:center'><img width=179
height=190 id="Picture 105" src="18_files/image002.jpg"></p>

<p class=MsoCaption><span lang=ES-MX>Figura 18-1: Una captura de pantalla
alterada del programa Detección de Colisiones.</span></p>

<p class=Non-TOCHeading3><span lang=ES-MX>Importando los Módulos</span></p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber><span lang=ES-MX>  1.</span></span><span
lang=ES-MX> import pygame, sys, random</span></p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber><span lang=ES-MX>  2.</span></span><span
lang=ES-MX> from pygame.locals import *</span></p>

</div>

<p class=Body><span lang=ES-MX>El programa de detección de colisiones importa
las mismas cosas que el programa de animación del capítulo anterior, junto con
el módulo </span><span class=Literal><span lang=ES-MX style='font-size:9.0pt;
line-height:115%'>random</span></span><span lang=ES-MX>.</span></p>

<h2><a name="_Toc428130728"><span lang=ES-MX>El Algoritmo de Detección de
Colisiones</span></a></h2>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCode><span class=SourceLineNumber><span lang=ES-MX>  4.</span></span><span
lang=ES-MX> def verifSuperposiciónRects(rect1, rect2):</span></p>

</div>

<p class=Body><span lang=ES-MX>Para detectar colisiones, necesitas una función
que pueda determinar si dos rectángulos se superponen o no. La Figura 18-2
muestra ejemplos de rectángulos superpuestos y no superpuestos.</span></p>

<p class=MsoNormal align=center style='text-align:center'><img width=265
height=114 id="Picture 81" src="18_files/image003.jpg"></p>

<p class=MsoCaption><span lang=ES-MX>Figura 18-2: Ejemplos de rectángulos que
colisionan (izquierda) y rectángulos que no colisionan (derecha).</span></p>

<p class=Body><span class=Literal><span lang=ES-MX style='font-size:9.0pt;
line-height:115%'>verifSuperposiciónRects()</span></span><span lang=ES-MX>
recibe dos objetos </span><span class=Literal><span lang=ES-MX
style='font-size:9.0pt;line-height:115%'>pygame.Rect</span></span><span
lang=ES-MX>. La función devuelve </span><span class=Literal><span lang=ES-MX
style='font-size:9.0pt;line-height:115%'>True</span></span><span lang=ES-MX> si
colisionan y </span><span class=Literal><span lang=ES-MX style='font-size:9.0pt;
line-height:115%'>False</span></span><span lang=ES-MX> si no lo hacen. Hay una
regla simple a seguir para determinar si los rectángulos colisionan. Mira cada
una de las cuatro esquinas de ambos rectángulos. Si al menos una de estas ocho
esquinas está dentro del otro rectángulo, quiere decir que los rectángulos han
colisionado. Podemos usar esto para determinar si </span><span class=Literal><span
lang=ES-MX style='font-size:9.0pt;line-height:115%'>verifSuperposiciónRects()</span></span><span
lang=ES-MX> debe devolver </span><span class=Literal><span lang=ES-MX
style='font-size:9.0pt;line-height:115%'>True</span></span><span lang=ES-MX> o </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>False</span></span><span
lang=ES-MX>.</span></p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber><span lang=ES-MX>  </span>5.</span>    
for a, b in [(rect1, rect2), (rect2, rect1)]:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  </span><span
class=SourceLineNumber><span lang=ES-MX>6.</span></span><span lang=ES-MX>        
<span class=SourceCodeComment># Verifica si las esquinas de a se encuentran
dentro de b</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>  </span>7.</span>        
if ((puntoDentroDeRect(a.left, a.top, b)) or</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  8.</span>            
(puntoDentroDeRect(a.left, a.bottom, b)) or</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  9.</span>          
  (puntoDentroDeRect(a.right, a.top, b)) or</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 10.</span>            
(puntoDentroDeRect(a.right, a.bottom, b))):</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> </span><span
class=SourceLineNumber><span lang=ES-MX>11.</span></span><span lang=ES-MX>            
return True</span></p>

</div>

<p class=Body><span lang=ES-MX>Las líneas 5 a 11 comprueban si las esquinas de
un rectángulo están dentro del otro. Más tarde, crearemos una función llamada </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>puntoDentroDeRect()</span></span><span
lang=ES-MX> que devuelve </span><span class=Literal><span lang=ES-MX
style='font-size:9.0pt;line-height:115%'>True</span></span><span lang=ES-MX> si
las coordenadas XY del punto está dentro del rectángulo. Llamaremos a esta
función para cada una de las ocho esquinas, y si alguna de estas llamadas
devuelve </span><span class=Literal><span lang=ES-MX style='font-size:9.0pt;
line-height:115%'>True</span></span><span lang=ES-MX>, los operadores or harán
que toda la condición sea </span><span class=Literal><span lang=ES-MX
style='font-size:9.0pt;line-height:115%'>True</span></span><span lang=ES-MX>.</span></p>

<p class=Body><span lang=ES-MX>Los parámetros de </span><span class=Literal><span
lang=ES-MX style='font-size:9.0pt;line-height:115%'>verifSuperposiciónRects()</span></span><span
lang=ES-MX> son </span><span class=Literal><span lang=ES-MX style='font-size:
9.0pt;line-height:115%'>rect1</span></span><span lang=ES-MX> y </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>rect2</span></span><span
lang=ES-MX>. Primero comprueba si las esquinas de </span><span class=Literal><span
lang=ES-MX style='font-size:9.0pt;line-height:115%'>rect1</span></span><span
lang=ES-MX> están dentro de </span><span class=Literal><span lang=ES-MX
style='font-size:9.0pt;line-height:115%'>rect2</span></span><span lang=ES-MX>,
y después si las esquinas de </span><span class=Literal><span lang=ES-MX
style='font-size:9.0pt;line-height:115%'>rect2</span></span><span lang=ES-MX>
están dentro de </span><span class=Literal><span lang=ES-MX style='font-size:
9.0pt;line-height:115%'>rect1</span></span><span lang=ES-MX>.</span></p>

<p class=Body><span lang=ES-MX>No necesitas repetir para </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>rect1</span></span><span
lang=ES-MX> y </span><span class=Literal><span lang=ES-MX style='font-size:
9.0pt;line-height:115%'>rect2</span></span><span lang=ES-MX> el código que
comprueba las cuatro esquinas. En cambio, puedes usar a y b en las líneas 7 a
10. El bucle for en la línea 5 usa asignación múltiple. En la primera
iteración, a toma el valor </span><span class=Literal><span lang=ES-MX
style='font-size:9.0pt;line-height:115%'>rect1</span></span><span lang=ES-MX> y
b toma el valor </span><span class=Literal><span lang=ES-MX style='font-size:
9.0pt;line-height:115%'>rect2</span></span><span lang=ES-MX>. En la segunda
iteración del bucle, es lo opuesto: a adquiere el valor </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>rect2</span></span><span
lang=ES-MX> y b toma </span><span class=Literal><span lang=ES-MX
style='font-size:9.0pt;line-height:115%'>rect1</span></span><span lang=ES-MX>.</span></p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCode><span class=SourceLineNumber><span lang=ES-MX>13.</span></span><span
lang=ES-MX>     return False</span></p>

</div>

<p class=Body><span lang=ES-MX>Si la línea 11 nunca devuelve </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>True</span></span><span
lang=ES-MX>, entonces nuinguna de las ocho esquinas comprobadas está dentro del
otro rectángulo. En ese caso, los rectángulos no han colisionado y la línea 13
devuelve </span><span class=Literal><span lang=ES-MX style='font-size:9.0pt;
line-height:115%'>False</span></span><span lang=ES-MX>.</span></p>

<p class=Non-TOCHeading3><span lang=ES-MX>Determinando si un Punto está Dentro
de un Rectángulo</span></p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber><span lang=ES-MX> 15.</span></span><span
lang=ES-MX> def puntoDentroDeRect(x, y, rect):</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> </span>16.</span>    
if (x &gt; rect.left) and (x &lt; rect.right) and (y &gt; rect.top) and (y &lt;
rect.bottom):</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> </span><span
class=SourceLineNumber><span lang=ES-MX>17.</span></span><span lang=ES-MX>        
return True</span></p>

</div>

<p class=Body><span lang=ES-MX>La función </span><span class=Literal><span
lang=ES-MX style='font-size:9.0pt;line-height:115%'>puntoDentroDeRect()</span></span><span
lang=ES-MX> es llamada desde </span><span class=Literal><span lang=ES-MX
style='font-size:9.0pt;line-height:115%'>verifSuperposiciónRects()</span></span><span
lang=ES-MX>. La función </span><span class=Literal><span lang=ES-MX
style='font-size:9.0pt;line-height:115%'>puntoDentroDeRect()</span></span><span
lang=ES-MX> devolverá </span><span class=Literal><span lang=ES-MX
style='font-size:9.0pt;line-height:115%'>True</span></span><span lang=ES-MX> si
las coordenadas XY pasadas se encuentran dentro del objeto </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>pygame.Rect</span></span><span
lang=ES-MX> pasado como tercer parámetro. De otro modo, esta función devuelve </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>False</span></span><span
lang=ES-MX>.</span></p>

<p class=Body><span lang=ES-MX>La Figura 18-3 es un ejemplo de un rectángulo y
varios puntos. Los puntos y las esquinas del rectángulo están etiquetados con
sus coordenadas.</span></p>

<p class=Body><span lang=ES-MX>Un punto está dentro del rectángulo si se
cumplen las siguientes cuatro afirmaciones:</span></p>

<p class=Body style='margin-left:.5in;text-indent:-.25in'><span lang=ES-MX
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=ES-MX>La coordenada X del punto es mayor que la
coordenada X del borde izquierdo del rectángulo.</span></p>

<p class=Body style='margin-left:.5in;text-indent:-.25in'><span lang=ES-MX
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=ES-MX>La coordenada X del punto es menor que la
coordenada X del borde derecho del rectángulo.</span></p>

<p class=Body style='margin-left:.5in;text-indent:-.25in'><span lang=ES-MX
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=ES-MX>La coordenada Y del punto es mayor que la
coordenada Y del borde inferior del rectángulo.</span></p>

<p class=Body style='margin-left:.5in;text-indent:-.25in'><span lang=ES-MX
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=ES-MX>La coordenada Y del punto es menor que la
coordenada Y del borde superior del rectángulo.</span></p>

<p class=Body><span lang=ES-MX>Si alguna de estas es </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>False</span></span><span
lang=ES-MX>, entonces el punto está fuera del rectángulo. La línea 16 combina
estas cuatro afirmaciones en la condición de la sentencia </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>if</span></span><span
lang=ES-MX> utilizando operadores </span><span class=Literal><span lang=ES-MX
style='font-size:9.0pt;line-height:115%'>and</span></span><span lang=ES-MX>.</span></p>

<p class=MsoNormal align=center style='text-align:center'><img width=232
height=152 id="Picture 59" src="18_files/image004.jpg"></p>

<p class=MsoCaption><span lang=ES-MX>Figura 18-3: Ejemplo de coordenadas dentro
y fuera de un rectángulo. Los puntos (50, 30), (85, 30) y (50, 50) están dentro
del rectángulo, el resto están afuera del mismo.</span></p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber><span lang=ES-MX> 18.</span></span><span
lang=ES-MX>     else:</span></p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber><span lang=ES-MX> 19.</span></span><span
lang=ES-MX>         return False</span></p>

</div>

<p class=Body><span lang=ES-MX>Esta función es llamada desde la función </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>verifSuperposiciónRects()</span></span><span
lang=ES-MX> para ver si alguna de las esquinas de los objetos </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>pygame.Rect</span></span><span
lang=ES-MX> está dentro del otro. Estas dos funciones te permiten detectar
colisiones entre dos rectángulos.</span></p>

<p class=Non-TOCHeading3><span lang=ES-MX>El Objeto </span><span class=Literal><span
lang=ES-MX style='font-size:9.0pt;line-height:115%'>pygame.time.Clock</span></span><span
lang=ES-MX> Object y el Método </span><span class=Literal><span lang=ES-MX
style='font-size:9.0pt;line-height:115%'>tick()</span></span></p>

<p class=Body><span lang=ES-MX>La mayor parte de las líneas 22 a 43 hace lo
mismo que hacía el programa de Animación del capítulo anterior: inicializar
Pygame, establecer </span><span class=Literal><span lang=ES-MX
style='font-size:9.0pt;line-height:115%'>ANCHOVENTANA</span></span><span
lang=ES-MX> y </span><span class=Literal><span lang=ES-MX style='font-size:
9.0pt;line-height:115%'>ALTOVENTANA</span></span><span lang=ES-MX>, y asignar
las constantes de color y dirección.</span></p>

<p class=Body><span lang=ES-MX>Sin embargo, la línea 24 es nueva:</span></p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCode><span class=SourceLineNumber><span lang=ES-MX> 24.</span></span><span
lang=ES-MX> relojPrincipal = pygame.time.Clock()</span></p>

</div>

<p class=Body><span lang=ES-MX>En el programa anterior de Animación, una
llamada a </span><span class=Literal><span lang=ES-MX style='font-size:9.0pt;
line-height:115%'>time.sleep(0.02)</span></span><span lang=ES-MX> reducía la
velocidad del programa de modo que no corriese demasiado rápido. El problema
con </span><span class=Literal><span lang=ES-MX style='font-size:9.0pt;
line-height:115%'>time.sleep()</span></span><span lang=ES-MX> es que puede
representar una pausa demasiado larga para computadoras lentas y demasiado
corta para computadoras rápidas.</span></p>

<p class=Body><span lang=ES-MX>Un objeto </span><span class=Literal><span
lang=ES-MX style='font-size:9.0pt;line-height:115%'>pygame.time.Clock</span></span><span
lang=ES-MX> puede generar una pausa que sea adecuada para cualquier
computadora. La línea 125 llama a </span><span class=Literal><span lang=ES-MX
style='font-size:9.0pt;line-height:115%'>mainClock.tick(40)</span></span><span
lang=ES-MX> dentro del bucle del juego. Esta llamada al método </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>tick()</span></span><span
lang=ES-MX> del objeto Clock calcula la pausa adecuada para que el bucle
ejecute unas 40 iteraciones por segundo, sin importar cuál sea la velocidad de
la computadora. Esto asegura que el juego nunca se ejecute más rápido de lo
esperado. La llamada a </span><span class=Literal><span lang=ES-MX
style='font-size:9.0pt;line-height:115%'>tick()</span></span><span lang=ES-MX>
debe hacerse sólo una vez en el bucle del juego.</span></p>

<p class=Non-TOCHeading3><span lang=ES-MX>Configurando la Ventana y las
Estructuras de Datos</span></p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber><span lang=ES-MX> 45.</span></span><span
lang=ES-MX> <span class=SourceCodeComment># establece las estructuras de datos
de comida y rebotín</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 46.</span></span><span
lang=ES-MX> contadorComida = 0</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 47.</span></span><span
lang=ES-MX> NUEVACOMIDA = 40</span></p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber><span lang=ES-MX> 48.</span></span><span
lang=ES-MX> TAMAÑOCOMIDA = 20</span></p>

</div>

<p class=Body><span lang=ES-MX>Las líneas 46 a 48 configuran algunas variables
para los bloques de comida que aparecen en la pantalla. </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>contadorComida</span></span><span
lang=ES-MX> comenzará en el valor </span><span class=Literal><span lang=ES-MX
style='font-size:9.0pt;line-height:115%'>0</span></span><span lang=ES-MX>, </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>NUEVACOMIDA</span></span><span
lang=ES-MX> en </span><span class=Literal><span lang=ES-MX style='font-size:
9.0pt;line-height:115%'>40</span></span><span lang=ES-MX>, y </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>TAMAÑOCOMIDA</span></span><span
lang=ES-MX> en </span><span class=Literal><span lang=ES-MX style='font-size:
9.0pt;line-height:115%'>20</span></span><span lang=ES-MX>.</span></p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCode><span class=SourceLineNumber><span lang=ES-MX> 49.</span></span><span
lang=ES-MX> rebotín = {'rect':pygame.Rect(300, 100, 50, 50), 'dir':ARRIBAIZQUIERDA}</span></p>

</div>

<p class=Body><span lang=ES-MX>La línea 49 configura una nueva estructura de
datos llamada rebotín. rebotín es un diccionario con dos claves. La clave </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>'rect'</span></span><span
lang=ES-MX> contiene un objeto </span><span class=Literal><span lang=ES-MX
style='font-size:9.0pt;line-height:115%'>pygame.Rect</span></span><span
lang=ES-MX> que representa el tamaño y la posición del rebotín.</span></p>

<p class=Body><span lang=ES-MX>La clave </span><span class=Literal><span
lang=ES-MX style='font-size:9.0pt;line-height:115%'>'dir'</span></span><span
lang=ES-MX> contiene la dirección en la cual el rebotín se está moviendo. El
rebotín se moverá de la misma forma en que se movían los bloques en el programa
de animación del Capítulo 17.</span></p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber><span lang=ES-MX> </span>50.</span>
comidas = []</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 51.</span> for i in
range(20):</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> 52.</span>     comidas.append(pygame.Rect(random.randint(0,
ANCHOVENTANA - TAMAÑOCOMIDA), random.randint(0, ALTOVENTANA - TAMAÑOCOMIDA),
TAMAÑOCOMIDA, TAMAÑOCOMIDA))</p>

</div>

<p class=Body><span lang=ES-MX>El programa lleva un registro de todos los
cuadrados de comida con una lista de objetos Rect en comidas. Las líneas 51 y
52 crean veinte cuadrados de comida ubicados aleatoriamente en la pantalla.
Puedes usar la función </span><span class=Literal><span lang=ES-MX
style='font-size:9.0pt;line-height:115%'>random.randint()</span></span><span
lang=ES-MX> para generar coordenadas XY aleatorias.</span></p>

<p class=Body><span lang=ES-MX>En la línea 52, llamamos a la función
constructor </span><span class=Literal><span lang=ES-MX style='font-size:9.0pt;
line-height:115%'>pygame.Rect()</span></span><span lang=ES-MX> para que
devuelva un nuevo objeto pygame.Rect. Este objeto representará la posición y el
tamaño del cuadrado de comida. Los primeros dos parámetros para </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>pygame.Rect()</span></span><span
lang=ES-MX> son las coordenadas XY de la esquina superior izquierda. Queremos
que la coordenada aleatoria esté entre 0 y el tamaño de la ventana menos el
tamaño del cuadrado de comida. Si la coordenada aleatoria estuviese simplemente
entre 0 y el tamaño de la ventana, el cuadrado de comida podría quedar fuera de
la ventana, como en la Figura 18-4.</span></p>

<p class=MsoNormal align=center style='text-align:center'><img width=261
height=219 id="Picture 85" src="18_files/image005.jpg"></p>

<p class=MsoCaption><span lang=ES-MX>Figura 18-4: Para un rectángulo de 20 por
20, tener su esquina superior izquierda en (400, 200) en una ventana de 400 por
400 significaría estar fuera de la ventana. Para que el cuadrado esté contenido
en de la ventana, la esquina superior izquierda debería estar en (380, 200).</span></p>

<p class=Body><span lang=ES-MX>El tercer parámetro de </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>pygame.Rect()</span></span><span
lang=ES-MX> es una tupla que contiene el ancho y la altura del cuadrado de
comida. Tanto el ancho como la altura corresponden al valor en la constante </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>TAMAÑOCOMIDA</span></span><span
lang=ES-MX>.</span></p>

<p class=Non-TOCHeading3><span lang=ES-MX>Dibujando el Rebotín en la Pantalla</span></p>

<p class=Body><span lang=ES-MX>Las líneas 71 a 109 hacen que el rebotín se
mueva por la ventana y rebote contra los bordes de la misma. Este código es
similar a las líneas 44 a 83 del programa de Animación del capítulo anterior,
por lo que omitiremos su explicación.</span></p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber><span lang=ES-MX>111.</span></span><span
lang=ES-MX>     <span class=SourceCodeComment># Dibuja a rebotín en la
superficie</span></span></p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber><span lang=ES-MX>112.</span></span><span
lang=ES-MX>     pygame.draw.rect(superficieVentana, BLANCO, rebotín['rect'])</span></p>

</div>

<p class=Body><span lang=ES-MX>Luego de desplazar al rebotín, la línea 112 lo
dibuja en su nueva posición. La </span><span class=Literal><span lang=ES-MX
style='font-size:9.0pt;line-height:115%'>superficieVentana</span></span><span
lang=ES-MX> pasada como primer parámetro indica a Python sobre cuál objeto
Surface dibujar el rectángulo. La variable </span><span class=Literal><span
lang=ES-MX style='font-size:9.0pt;line-height:115%'>BLANCO</span></span><span
lang=ES-MX>, que almacena la tupla </span><span class=Literal><span lang=ES-MX
style='font-size:9.0pt;line-height:115%'>(255, 255, 255)</span></span><span
lang=ES-MX>, indica a Python que dibuje un rectángulo blanco. El objeto Rect
guardado en el diccionario rebotín en la clave </span><span class=Literal><span
lang=ES-MX style='font-size:9.0pt;line-height:115%'>'rect'</span></span><span
lang=ES-MX> indica la posición y el tamaño del rectángulo a dibujar.</span></p>

<p class=Non-TOCHeading3><span lang=ES-MX>Colisionando con los Cuadrados de
Comida</span></p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber><span lang=ES-MX>114.</span></span><span
lang=ES-MX>     <span class=SourceCodeComment># Verifica si rebotín intersectó
algun cuadrado de comida</span></span></p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber><span lang=ES-MX>115.</span></span><span
lang=ES-MX>     for comida in comida[:]:</span></p>

</div>

<p class=Body><span lang=ES-MX>Antes de dibujar los cuadrados de comida, se
comprueba si el rebotín se superpone con alguno de los cuadrados de comida. Si
es así, quita ese cuadrado de comida de la lista de comidas. De esta forma,
Python no dibujará los cuadrados de </span><span class=Literal><span
lang=ES-MX style='font-size:9.0pt;line-height:115%'>comida</span></span><span
lang=ES-MX> que el rebotín se halla “comido”.</span></p>

<p class=Body><span lang=ES-MX>En cada iteración del bucle </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>for</span></span><span
lang=ES-MX>, el cuadrado de comida actual de la lista de </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>comidas</span></span><span
lang=ES-MX> (plural) se asigna a la variable </span><span class=Literal><span
lang=ES-MX style='font-size:9.0pt;line-height:115%'>comida</span></span><span
lang=ES-MX> (singular).</span></p>

<h2><a name="_Toc428130729"><span lang=ES-MX>No Agregues o Borres elementos de
una Lista mientras Iteras Sobre Ella</span></a></h2>

<p class=Body><span lang=ES-MX>Nota que hay una pequeña diferencia en este
bucle for. Si observas detalladamente la línea 116, verás que no está iterando
sobre comidas, sino sobre </span><span class=Literal><span lang=ES-MX
style='font-size:9.0pt;line-height:115%'>comidas[:]</span></span><span
lang=ES-MX>.</span></p>

<p class=Body><span lang=ES-MX>Recuerda como funcionan las operaciones de rebanado.
</span><span class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:
115%'>comidas[:2]</span></span><span lang=ES-MX> se evalúa a una copia de la
lista con los ítems desde el principio hasta el ítem en el índice </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>2</span></span><span
lang=ES-MX> (sin incluir a este último). </span><span class=Literal><span
lang=ES-MX style='font-size:9.0pt;line-height:115%'>comidas[3:]</span></span><span
lang=ES-MX> se evalúa a una copia de la lista con los ítems desde el índice </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>3</span></span><span
lang=ES-MX> y hasta el final de la lista.</span></p>

<p class=Body><span class=Literal><span lang=ES-MX style='font-size:9.0pt;
line-height:115%'>comidas[:]</span></span><span lang=ES-MX> develve una copia
de la lista con todos sus ítems (del primero al último). Básicamente, </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>comidas[:]</span></span><span
lang=ES-MX> crea una nueva lista con una copia de todos los ítems en comidas.
Esta es una forma de copiar la lista más corta que, por ejemplo, lo que hace la
función </span><span class=Literal><span lang=ES-MX style='font-size:9.0pt;
line-height:115%'>obtenerDuplicadoTablero()</span></span><span lang=ES-MX> en
el juego de Ta Te Ti.</span></p>

<p class=Body><span lang=ES-MX>No puedes agregar o quitar ítems de una lista
mientras estás iterando sobre ella. Python puede perder la cuenta de cuál
debería ser el próximo valor de la variable </span><span class=Literal><span
lang=ES-MX style='font-size:9.0pt;line-height:115%'>comida</span></span><span
lang=ES-MX> si el tamaño de la lista </span><span class=Literal><span
lang=ES-MX style='font-size:9.0pt;line-height:115%'>comidas</span></span><span
lang=ES-MX> está cambiando. Piensa en lo difícil que sería contar el número de
caramelos en un frasco mientras alguien está agregando o quitando caramelos.</span></p>

<p class=Body><span lang=ES-MX>Pero si iteras sobre una copia de la lista (y la
copia no cambia mientras lo haces), agregar o quitar ítems de la lista original
no será un problema.</span></p>

<p class=Non-TOCHeading3><span lang=ES-MX>Quitando los Cuadrados de Comida</span></p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber><span lang=ES-MX>116.</span></span><span
lang=ES-MX>         if verifSuperposiciónRects(rebotín['rect'], comida):</span></p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber><span lang=ES-MX>117.</span></span><span
lang=ES-MX>             comidas.remove(comida)</span></p>

</div>

<p class=Body><span lang=ES-MX>La línea 116 es donde </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>verifSuperposiciónRects()</span></span><span
lang=ES-MX> resulta útil. Si el rebotín y el cuadrado de comida se superponen,
entonces </span><span class=Literal><span lang=ES-MX style='font-size:9.0pt;
line-height:115%'>verifSuperposiciónRects()</span></span><span lang=ES-MX>
devuelve </span><span class=Literal><span lang=ES-MX style='font-size:9.0pt;
line-height:115%'>True</span></span><span lang=ES-MX> y la línea 117 quita el
cuadrado de comida superpuesto de la lista de </span><span class=Literal><span
lang=ES-MX style='font-size:9.0pt;line-height:115%'>comidas</span></span><span
lang=ES-MX>.</span></p>

<p class=Non-TOCHeading3><span lang=ES-MX>Dibujando los Cuadrados de Comida en
la Pantalla</span></p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber><span lang=ES-MX>119.</span></span><span
lang=ES-MX>     <span class=SourceCodeComment># Dibuja la comida</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>120.</span></span><span
lang=ES-MX>     for i in range(len(comidas)):</span></p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber><span lang=ES-MX>121.</span></span><span
lang=ES-MX>         pygame.draw.rect(superficieVentana, VERDE, comidas[i])</span></p>

</div>

<p class=Body><span lang=ES-MX>El código en las líneas 120 y 121 es similar a
la forma en que dibujamos el cuadrado blanco para el jugador. La línea 120 pasa
por cada cuadrado de comida sobre la superficie de </span><span class=Literal><span
lang=ES-MX style='font-size:9.0pt;line-height:115%'>superficieVentana</span></span><span
lang=ES-MX>. Este programa es similar al programa del rebotín en el capítulo
anterior, sólo que ahora el cuadrado que rebota se &quot;come&quot; a los otros
cuadrados si pasa por encima de ellos.</span></p>

<p class=Body><span lang=ES-MX>Estos últimos programas son interesantes para
observar, pero el usuario no puede controlar nada. En el siguiente programa,
aprenderemos a obtener entradas desde el teclado.</span></p>

<h2><a name="_Toc428130730"><span lang=ES-MX>Código Fuente del Programa de
Entradas de Teclado</span></a></h2>

<p class=Body><span lang=ES-MX>Crea un archivo nuevo y escribe el siguiente
código, luego guárdalo como <em>pygameEntrada.py</em>. Si obtienes errores
luego de haber escrito el código, compara el código que has escrito con el del
libro usando la herramienta digg online en <span class=URL><u>http://invpy.com/es/diff/pygameEntrada</u></span>.</span></p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeFilename>pygameEntrada.py</p>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>  1.</span> import
pygame, sys, random</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  2.</span> from
pygame.locals import *</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  3. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  4.</span> <span
class=SourceCodeComment># configurar pygame</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  5.</span>
pygame.init()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  6.</span> relojPrincipal
= pygame.time.Clock()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  7. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  8.</span> <span
class=SourceCodeComment># configurar la ventana</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  9.</span> ANCHOVENTANA
= 400</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 10.</span> ALTURAVENTANA
= 400</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 11.</span> superficieVentana
= pygame.display.set_mode((ANCHOVENTANA, ALTURAVENTANA), 0, 32)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> </span><span
class=SourceLineNumber><span lang=ES-MX>12.</span></span><span lang=ES-MX>
pygame.display.set_caption('Entrada')</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 13.
</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 14.</span></span><span
lang=ES-MX> <span class=SourceCodeComment># configurar los colores</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 15.</span></span><span
lang=ES-MX> NEGRO = (0, 0, 0)</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 16.</span></span><span
lang=ES-MX> VERDE = (0, 255, 0)</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 17.</span></span><span
lang=ES-MX> BLANCO = (255, 255, 255)</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 18.
</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 19.</span></span><span
lang=ES-MX> <span class=SourceCodeComment># configurar estructura de datos del
jugador y la comida</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 20.</span></span><span
lang=ES-MX> contadorDeComida = 0</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 21.</span></span><span
lang=ES-MX> NUEVACOMIDA = 40</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 22.</span></span><span
lang=ES-MX> TAMAÑOCOMIDA = 20</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 23.</span></span><span
lang=ES-MX> jugador = pygame.Rect(300, 100, 50, 50)</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> </span>24.</span>
comidas = []</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 25.</span> for i in
range(20):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 26.</span>     comidas.append(pygame.Rect(random.randint(0,
ANCHOVENTANA - TAMAÑOCOMIDA), random.randint(0, ALTURAVENTANA - TAMAÑOCOMIDA),
TAMAÑOCOMIDA, TAMAÑOCOMIDA))</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> </span><span
class=SourceLineNumber><span lang=ES-MX>27. </span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 28.</span></span><span
lang=ES-MX> <span class=SourceCodeComment># configurar variables de movimiento</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 29.</span></span><span
lang=ES-MX> moverseIzquierda = False</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 30.</span></span><span
lang=ES-MX> moverseDerecha = False</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 31.</span></span><span
lang=ES-MX> moverseArriba = False</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 32.</span></span><span
lang=ES-MX> moverseAbajo = False</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 33.
</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 34.</span></span><span
lang=ES-MX> VELOCIDADMOVIMIENTO = 6</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 35.
</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 36.
</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 37.</span></span><span
lang=ES-MX> <span class=SourceCodeComment># ejecutar el bucle del juego</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> </span>38.</span>
while True:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 39.</span>     <span
class=SourceCodeComment># comprobar eventos</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 40.</span>     for
evento in pygame.event.get():</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 41.</span>        
if evento.type == QUIT:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 42.</span>            
pygame.quit()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 43.</span>            
sys.exit()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 44.</span>        
if evento.type == KEYDOWN:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> </span><span
class=SourceLineNumber><span lang=ES-MX>45.</span></span><span lang=ES-MX>            
<span class=SourceCodeComment># cambiar las variables del teclado</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 46.</span></span><span
lang=ES-MX>             </span>if evento.key == K_LEFT or evento.key ==
ord('a'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 47.</span>                
moverseDerecha = False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 48.</span>                
moverseIzquierda = True</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 49.</span>            
if evento.key == K_RIGHT or evento.key == ord('d'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 50.</span>                
moverseIzquierda = False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 51.</span>                
moverseDerecha = True</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 52.</span>            
if evento.key == K_UP or evento.key == ord('w'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 53.</span>                
moverseAbajo = False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 54.</span>                
moverseArriba = True</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 55.</span>            
if evento.key == K_DOWN or evento.key == ord('s'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 56.</span>                
moverseArriba = False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 57.</span>                
moverseAbajo = True</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 58.</span>        
if evento.type == KEYUP:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 59.</span>            
if evento.key == K_ESCAPE:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 60.</span>                
pygame.quit()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 61.</span>                
sys.exit()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 62.</span>            
if evento.key == K_LEFT or evento.key == ord('a'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 63.</span>                
moverseIzquierda = False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 64.</span>            
if evento.key == K_RIGHT or evento.key == ord('d'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 65.</span>                
moverseDerecha = False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 66.</span>            
if evento.key == K_UP or evento.key == ord('w'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 67.</span>                
moverseArriba = False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 68.</span>            
if evento.key == K_DOWN or evento.key == ord('s'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 69.</span>                
moverseAbajo = False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 70.</span>            
if evento.key == ord('x'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> </span><span
class=SourceLineNumber><span lang=ES-MX>71.</span></span><span lang=ES-MX>                
jugador.top = random.randint(0, ALTURAVENTANA - jugador.height)</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 72.</span></span><span
lang=ES-MX>                 jugador.left = random.randint(0, ANCHOVENTANA -
jugador.width)</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 73.
</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 74.</span></span><span
lang=ES-MX>         if evento.type == MOUSEBUTTONUP:</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 75.</span></span><span
lang=ES-MX>             comidas.append(pygame.Rect(evento.pos[0],
evento.pos[1], TAMAÑOCOMIDA, TAMAÑOCOMIDA))</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 76.
</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 77.</span></span><span
lang=ES-MX>     contadorDeComida += 1</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 78.</span></span><span
lang=ES-MX>     if contadorDeComida &gt;= NUEVACOMIDA:</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 79.</span></span><span
lang=ES-MX>         <span class=SourceCodeComment># agregar nueva comida</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 80.</span></span><span
lang=ES-MX>         contadorDeComida = 0</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 81.</span></span><span
lang=ES-MX>         comidas.append(pygame.Rect(random.randint(0, ANCHOVENTANA -
TAMAÑOCOMIDA), random.randint(0, ALTURAVENTANA - TAMAÑOCOMIDA), TAMAÑOCOMIDA, TAMAÑOCOMIDA))</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 82.
</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 83.</span></span><span
lang=ES-MX>     <span class=SourceCodeComment># dibujar el fondo negro sobre la
superficie</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 84.</span></span><span
lang=ES-MX>     superficieVentana.fill(NEGRO)</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 85.
</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 86.</span></span><span
lang=ES-MX>     <span class=SourceCodeComment># mover al jugador</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> </span>87.</span>    
if moverseAbajo and jugador.bottom &lt; ALTURAVENTANA:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> </span><span
class=SourceLineNumber><span lang=ES-MX>88.</span></span><span lang=ES-MX>        
jugador.top += VELOCIDADMOVIMIENTO</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 89.</span></span><span
lang=ES-MX>     if moverseArriba and jugador.top &gt; 0:</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 90.</span></span><span
lang=ES-MX>         jugador.top -= VELOCIDADMOVIMIENTO</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 91.</span></span><span
lang=ES-MX>     if moverseIzquierda and jugador.left &gt; 0:</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 92.</span></span><span
lang=ES-MX>         jugador.left -= VELOCIDADMOVIMIENTO</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 93.</span></span><span
lang=ES-MX>     if moverseDerecha and jugador.right &lt; ANCHOVENTANA:</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 94.</span></span><span
lang=ES-MX>         jugador.right += VELOCIDADMOVIMIENTO</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 95.
</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 96.</span></span><span
lang=ES-MX>     <span class=SourceCodeComment># dibujar al jugador sobre la
superficie</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 97.</span></span><span
lang=ES-MX>     pygame.draw.rect(superficieVentana, BLANCO, jugador)</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 98.</span></span><span
lang=ES-MX> </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 99.</span></span><span
lang=ES-MX>     <span class=SourceCodeComment># comprobar si el jugador ha
intersectado alguno de los cuadrados de comida</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>100.</span></span><span
lang=ES-MX>     for comida in comidas[:]:</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>101.</span></span><span
lang=ES-MX>         if jugador.colliderect(comida):</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>102.</span></span><span
lang=ES-MX>             comidas.remove(comida)</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>103.
</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>104.</span></span><span
lang=ES-MX>     <span class=SourceCodeComment># dibujar la comida</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>105.</span></span><span
lang=ES-MX>     for i in range(len(comidas)):</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>106.</span></span><span
lang=ES-MX>         pygame.draw.rect(superficieVentana, VERDE, comidas[i])</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>107.
</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>108.</span></span><span
lang=ES-MX>     <span class=SourceCodeComment># dibujar la ventana sobre la
pantalla</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>109.</span>    
pygame.display.update()</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>110.</span>     relojPrincipal.tick(40)</p>

</div>

<p class=Body><span lang=ES-MX>Este programa es idéntico al programa de
detección de colisiones. Pero en este programa, el rebotín sólo se mueve
mientras el jugador mantiene pulsadas las flechas del teclado.</span></p>

<p class=Body><span lang=ES-MX>También puedes hacer clic en cualquier lugar de
la ventana y crear nuevos objetos comida. Además, la tecla <span class=Keycap><span
style='font-variant:normal !important;text-transform:uppercase'>esc</span></span>
sale del programa y la “X” teletransporta al jugador a un lugar aleatorio en la
pantalla.</span></p>

<p class=Body><span lang=ES-MX>&nbsp;</span></p>

<p class=Body><span lang=ES-MX>&nbsp;</span></p>

<p class=Non-TOCHeading3><span lang=ES-MX>Configurando la Ventana y las
Estructuras de Datos</span></p>

<p class=Body><span lang=ES-MX>Comenzando en la línea 29, el código configura
algunas variables que registran el movimiento del rebotín.</span></p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber><span lang=ES-MX> 28.</span></span><span
lang=ES-MX> <span class=SourceCodeComment># configurar variables de movimiento</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 29.</span></span><span
lang=ES-MX> moverseIzquierda = False</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 30.</span></span><span
lang=ES-MX> moverseDerecha = False</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 31.</span></span><span
lang=ES-MX> moverseArriba = False</span></p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber><span lang=ES-MX> 32.</span></span><span
lang=ES-MX> moverseAbajo = False</span></p>

</div>

<p class=Body><span lang=ES-MX>Las cuatro variables tiene valores Booleanos
para registrar cuáles de las flechas del teclado están siendo pulsadas. Por
ejemplo, cuando el usuario pulsa la flecha izquierda en su teclado, se asigna </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>True</span></span><span
lang=ES-MX> a </span><span class=Literal><span lang=ES-MX style='font-size:
9.0pt;line-height:115%'>moverseIzquierda</span></span><span lang=ES-MX>. Cuando
el usuario suelta la tecla, </span><span class=Literal><span lang=ES-MX
style='font-size:9.0pt;line-height:115%'>moverseIzquierda</span></span><span
lang=ES-MX> vuelve a ser </span><span class=Literal><span lang=ES-MX
style='font-size:9.0pt;line-height:115%'>False</span></span><span lang=ES-MX>.</span></p>

<p class=Body><span lang=ES-MX>Las líneas 34 a 43 son idénticas al código en
los programas Pygame anteriores. Estas líneas gestionan el comienzo del bucle
de juego y qué hacer cuando el usuario sale del programa. Omitiremos la
explicación de este código que ya ha sido cubierto en el capítulo anterior.</span></p>

<p class=Non-TOCHeading3><span lang=ES-MX>Eventos y Manejo del Evento </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>KEYDOWN</span></span></p>

<p class=Body><span lang=ES-MX>El código para manejar los eventos de tecla
pulsada y tecla liberada comienza en la línea 44. Al comienzo del programa, se
asigna </span><span class=Literal><span lang=ES-MX style='font-size:9.0pt;
line-height:115%'>False</span></span><span lang=ES-MX> a todos estos eventos.</span></p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCode><span class=SourceLineNumber><span lang=ES-MX> 44.</span></span><span
lang=ES-MX>         if evento.type == KEYDOWN:</span></p>

</div>

<p class=Body><span lang=ES-MX>Pygame tiene un tipo de evento llamado </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>KEYDOWN</span></span><span
lang=ES-MX>. Este es uno de los otros eventos que Pygame puede generar. La
Tabla 18-1 muestra una breve lista de los eventons que pueden ser devueltos por
</span><span class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:
115%'>pygame.event.get()</span></span><span lang=ES-MX>.</span></p>

<p class=MsoNormal><span lang=ES-MX>&nbsp;</span></p>

<p class=MsoNormal><span lang=ES-MX>&nbsp;</span></p>

<p class=MsoNormal><span lang=ES-MX>&nbsp;</span></p>

<p class=MsoNormal><span lang=ES-MX>&nbsp;</span></p>

<p class=MsoNormal><span lang=ES-MX>&nbsp;</span></p>

<p class=MsoNormal><span lang=ES-MX>&nbsp;</span></p>

<p class=TableListing><span lang=ES-MX>Tabla 18-1: Eventos y cuándo son
generados.</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=227 valign=top style='width:135.9pt;border-top:double windowtext 1.5pt;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:none;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=TableHeading style='page-break-after:avoid'>Tipo de Evento</p>
  </td>
  <td width=572 valign=top style='width:342.9pt;border-top:double windowtext 1.5pt;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:none;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=TableHeading style='page-break-after:avoid'>Descripción</p>
  </td>
 </tr>
 <tr>
  <td width=227 valign=top style='width:135.9pt;border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='page-break-after:avoid'><span class=Literal><span
  style='font-size:9.0pt;line-height:115%'>QUIT</span></span></p>
  </td>
  <td width=572 valign=top style='width:342.9pt;border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='page-break-after:avoid'><span lang=ES-MX>Se genera
  cuando el usuario cierra la ventana.</span></p>
  </td>
 </tr>
 <tr>
  <td width=227 valign=top style='width:135.9pt;border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='page-break-after:avoid'><span class=Literal><span
  style='font-size:9.0pt;line-height:115%'>KEYDOWN</span></span></p>
  </td>
  <td width=572 valign=top style='width:342.9pt;border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='page-break-after:avoid'><span lang=ES-MX>Se genera
  cuando el usuario pulsa una tecla. Tiene un atributo key que indica cuál fue
  la tecla pulsada. También tiene un atributo mod que indica si las teclas
  Shift, Ctrl, Alt u otras teclas estaban siendo pulsadas en el momento en que
  se generó el evento.</span></p>
  </td>
 </tr>
 <tr>
  <td width=227 valign=top style='width:135.9pt;border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='page-break-after:avoid'><span class=Literal><span
  style='font-size:9.0pt;line-height:115%'>KEYUP</span></span></p>
  </td>
  <td width=572 valign=top style='width:342.9pt;border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='page-break-after:avoid'><span lang=ES-MX>Se genera
  cuando el usuario suelta una tecla. Tiene atributos key y mod similares a los
  del evento </span><span class=Literal><span lang=ES-MX style='font-size:9.0pt;
  line-height:115%'>KEYDOWN</span></span><span lang=ES-MX>.</span></p>
  </td>
 </tr>
 <tr>
  <td width=227 valign=top style='width:135.9pt;border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='page-break-after:avoid'><span class=Literal><span
  style='font-size:9.0pt;line-height:115%'>MOUSEMOTION</span></span></p>
  </td>
  <td width=572 valign=top style='width:342.9pt;border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='page-break-after:avoid'><span lang=ES-MX>Se genera
  cada vez que el ratón se desplaza sobre la ventana. Tiene un atributo pos que
  devuelve la tupla (x, y) con las coordenadas del ratón sobre la ventana. El
  atributo rel también devuelve una tupla (x, y), pero da coordenadas relativas
  a las del último evento </span><span class=Literal><span lang=ES-MX
  style='font-size:9.0pt;line-height:115%'>MOUSEMOTION</span></span><span
  lang=ES-MX>. Por ejemplo, si el mouse se mueve cuatro píxeles hacia la
  izquierda desde </span><span class=Literal><span lang=ES-MX style='font-size:
  9.0pt;line-height:115%'>(200, 200)</span></span><span lang=ES-MX> hasta </span><span
  class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>(196,
  200)</span></span><span lang=ES-MX>, el atributo rel será el valor de tupla </span><span
  class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>(-4,
  0)</span></span><span lang=ES-MX>.</span></p>
  <p class=MsoNormal style='page-break-after:avoid'><span lang=ES-MX>El
  atributo </span><span class=Literal><span lang=ES-MX style='font-size:9.0pt;
  line-height:115%'>buttons</span></span><span lang=ES-MX>  devuelve una tupla
  de tres enteros. El primer entero de la tupla corresponde al botón izquierdo
  del ratón, el segundo entero al botón central del ratón (en caso de que haya
  un botón central), y el tercero al botón derecho del ratón. Estos enteros
  serán 0 si los botones no están siendo pulsados y 1 en caso de que los
  botones estén siendo pulsados.</span></p>
  </td>
 </tr>
 <tr>
  <td width=227 valign=top style='width:135.9pt;border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='page-break-after:avoid'><span class=Literal><span
  style='font-size:9.0pt;line-height:115%'>MOUSEBUTTONDOWN</span></span></p>
  </td>
  <td width=572 valign=top style='width:342.9pt;border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='page-break-after:avoid'><span lang=ES-MX>Se genera
  cuando un botón del ratón es pulsado sobre la ventana. Este evento tiene un
  atributo pos que consiste en una tupla (x, y) con las coordenadas del lugar
  donde el botón del ratón fue pulsado. También hay un atributo </span><span
  class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>button</span></span><span
  lang=ES-MX> que es un entero comprendido entre 1 y 5 e indica qué botón del
  ratón fue pulsado, como se explica en la Tabla 18-2.</span></p>
  </td>
 </tr>
 <tr>
  <td width=227 valign=top style='width:135.9pt;border:none;border-bottom:double windowtext 1.5pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span class=Literal><span style='font-size:9.0pt;
  line-height:115%'>MOUSEBUTTONUP</span></span></p>
  </td>
  <td width=572 valign=top style='width:342.9pt;border:none;border-bottom:double windowtext 1.5pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span lang=ES-MX>Se genera al soltar el botón del ratón.
  Tiene los mismos atributos que el evento  </span><span class=Literal><span
  lang=ES-MX style='font-size:9.0pt;line-height:115%'>MOUSEBUTTONDOWN</span></span><span
  lang=ES-MX>.</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=ES-MX>&nbsp;</span></p>

<p class=MsoNormal><span lang=ES-MX>&nbsp;</span></p>

<p class=MsoNormal><span lang=ES-MX>&nbsp;</span></p>

<p class=MsoNormal><span lang=ES-MX>&nbsp;</span></p>

<p class=TableListing><span lang=ES-MX>Tabla 18-2: Los valores del atributo
button y su correspondiente botón del ratón.</span></p>

<div align=center>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=276 valign=top style='width:165.65pt;border-top:double windowtext 1.5pt;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:none;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=TableHeading style='page-break-after:avoid'>Valor de <span
  class=Literal><span style='font-size:9.0pt'>button</span></span></p>
  </td>
  <td width=276 valign=top style='width:165.7pt;border-top:double windowtext 1.5pt;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:none;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=TableHeading style='page-break-after:avoid'>Botón del ratón</p>
  </td>
 </tr>
 <tr>
  <td width=276 valign=top style='width:165.65pt;border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center;page-break-after:
  avoid'>1</p>
  </td>
  <td width=276 valign=top style='width:165.7pt;border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center;page-break-after:
  avoid'>Botón izquierdo</p>
  </td>
 </tr>
 <tr>
  <td width=276 valign=top style='width:165.65pt;border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center;page-break-after:
  avoid'>2</p>
  </td>
  <td width=276 valign=top style='width:165.7pt;border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center;page-break-after:
  avoid'>Botón central</p>
  </td>
 </tr>
 <tr>
  <td width=276 valign=top style='width:165.65pt;border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center;page-break-after:
  avoid'>3</p>
  </td>
  <td width=276 valign=top style='width:165.7pt;border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center;page-break-after:
  avoid'>Botón derecho</p>
  </td>
 </tr>
 <tr>
  <td width=276 valign=top style='width:165.65pt;border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center;page-break-after:
  avoid'>4</p>
  </td>
  <td width=276 valign=top style='width:165.7pt;border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center;page-break-after:
  avoid'><span lang=ES-MX>Rueda de desplazamiento movida hacia arriba</span></p>
  </td>
 </tr>
 <tr>
  <td width=276 valign=top style='width:165.65pt;border:none;border-bottom:
  double windowtext 1.5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center;page-break-after:
  avoid'>5</p>
  </td>
  <td width=276 valign=top style='width:165.7pt;border:none;border-bottom:double windowtext 1.5pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center;page-break-after:
  avoid'><span lang=ES-MX>Rueda de desplazamiento movida hacia abajo</span></p>
  </td>
 </tr>
</table>

</div>

<p class=Body><span lang=ES-MX>&nbsp;</span></p>

<p class=Non-TOCHeading3><span lang=ES-MX>Asignando las Cuatro Variables del
Teclado</span></p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber><span lang=ES-MX> 45.</span></span><span
lang=ES-MX>             <span class=SourceCodeComment># cambiar las variables
del teclado</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 46.</span></span><span
lang=ES-MX>             </span>if evento.key == K_LEFT or evento.key ==
ord('a'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 47.</span>                
moverseDerecha = False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 48.</span>                
moverseIzquierda = True</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 49.</span>            
if evento.key == K_RIGHT or evento.key == ord('d'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 50.</span>                
moverseIzquierda = False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 51.</span>                
moverseDerecha = True</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 52.</span>            
if evento.key == K_UP or evento.key == ord('w'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 53.</span>                 moverseAbajo
= False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 54.</span>                
moverseArriba = True</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 55.</span>            
if evento.key == K_DOWN or evento.key == ord('s'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> </span><span
class=SourceLineNumber><span lang=ES-MX>56.</span></span><span lang=ES-MX>                
moverseArriba = False</span></p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber><span lang=ES-MX> 57.</span></span><span
lang=ES-MX>                 moverseAbajo = True</span></p>

</div>

<p class=Body><span lang=ES-MX>Si el tipo de evento es </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>KEYDOWN</span></span><span
lang=ES-MX>, el objeto evento tendrá un atributo key que indica qué tecla ha
sido pulsada. La línea 46 compara este atributo con </span><span class=Literal><span
lang=ES-MX style='font-size:9.0pt;line-height:115%'>K_LEFT</span></span><span
lang=ES-MX>, que es la constante de </span><span class=Literal><span
lang=ES-MX style='font-size:9.0pt;line-height:115%'>pygame.locals</span></span><span
lang=ES-MX> que representa la flecha izquierda del teclado. Las líneas 49 a 57
realizan comprobaciones similares para cada una de las otras flechas del
teclado: </span><span class=Literal><span lang=ES-MX style='font-size:9.0pt;
line-height:115%'>K_RIGHT</span></span><span lang=ES-MX>, </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>K_UP</span></span><span
lang=ES-MX>, </span><span class=Literal><span lang=ES-MX style='font-size:9.0pt;
line-height:115%'>K_DOWN</span></span><span lang=ES-MX>.</span></p>

<p class=Body><span lang=ES-MX>Cuando una de estas teclas es pulsada, se asigna
</span><span class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:
115%'>True</span></span><span lang=ES-MX> a la variable de movimiento
correspondiente. Además, se asigna </span><span class=Literal><span lang=ES-MX
style='font-size:9.0pt;line-height:115%'>False</span></span><span lang=ES-MX> a
la variable de movimiento en la dirección opuesta.</span></p>

<p class=Body><span lang=ES-MX>Por ejemplo, el programa ejecuta las líneas 47 y
48 cuando se pulsa la flecha izquierda. En este caso, se asigna </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>True</span></span><span
lang=ES-MX> a </span><span class=Literal><span lang=ES-MX style='font-size:
9.0pt;line-height:115%'>moverseIzquierda</span></span><span lang=ES-MX> y </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>False</span></span><span
lang=ES-MX> a </span><span class=Literal><span lang=ES-MX style='font-size:
9.0pt;line-height:115%'>moverseDerecha</span></span><span lang=ES-MX> (es
posible que </span><span class=Literal><span lang=ES-MX style='font-size:9.0pt;
line-height:115%'>moverseDerecha</span></span><span lang=ES-MX> ya sea </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>False</span></span><span
lang=ES-MX> desde antes, pero le asignamos </span><span class=Literal><span
lang=ES-MX style='font-size:9.0pt;line-height:115%'>False</span></span><span
lang=ES-MX> sólo para estar seguros).</span></p>

<p class=Body><span lang=ES-MX>En la línea 46, evento.key puede ser igual a </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>K_LEFT</span></span><span
lang=ES-MX> u </span><span class=Literal><span lang=ES-MX style='font-size:
9.0pt;line-height:115%'>ord('a')</span></span><span lang=ES-MX>. El valor en </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>evento.key</span></span><span
lang=ES-MX> corresponde al valor ordinal entero de la tecla que fue pulsada en
el teclado. (No hay valores ordinales para las flechas del teclado, por eso es
que usamos la variable constante </span><span class=Literal><span lang=ES-MX
style='font-size:9.0pt;line-height:115%'>K_LEFT</span></span><span lang=ES-MX>.)
Puedes usar la función </span><span class=Literal><span lang=ES-MX
style='font-size:9.0pt;line-height:115%'>ord()</span></span><span lang=ES-MX>
para obtener el valor ordinal de cualquier caracter y compararlo con </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>evento.key</span></span><span
lang=ES-MX>.</span></p>

<p class=Body><span lang=ES-MX>Al ejecutar el código en las líneas 47 y 48 en
caso de que la tecla pulsada haya sido </span><span class=Literal><span
lang=ES-MX style='font-size:9.0pt;line-height:115%'>K_LEFT</span></span><span
lang=ES-MX> u </span><span class=Literal><span lang=ES-MX style='font-size:
9.0pt;line-height:115%'>ord('a')</span></span><span lang=ES-MX>, estamos
haciendo que la flecha izquierda y la tecla A hagan la misma cosa. El conjunto
de teclas W, A, S y D es una alternativa a las flechas del teclado para
jugadores que prefieren utilizar la mano izquierda para jugar.</span></p>

<p class=MsoNormal align=center style='text-align:center'><img width=331
height=113 id="Picture 77" src="18_files/image006.png"></p>

<p class=MsoCaption><span lang=ES-MX>Figura 18-5: Las teclas WASD pueden ser
programadas para hacer lo mismo que las flechas del teclado.</span></p>

<p class=Non-TOCHeading3><span lang=ES-MX>Manipulando el Evento </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>KEYUP</span></span></p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCode><span class=SourceLineNumber><span lang=ES-MX> 58.</span></span><span
lang=ES-MX>         if evento.type == KEYUP:</span></p>

</div>

<p class=Body><span lang=ES-MX>Cuando el usuario libera la tecla que mantenía
pulsada, se genera un evento </span><span class=Literal><span lang=ES-MX
style='font-size:9.0pt;line-height:115%'>KEYUP</span></span><span lang=ES-MX>.</span></p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber><span lang=ES-MX> </span>59.</span>            
if evento.key == K_ESCAPE:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> </span><span
class=SourceLineNumber><span lang=ES-MX>60.</span></span><span lang=ES-MX>                
pygame.quit()</span></p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber><span lang=ES-MX> 61.</span></span><span
lang=ES-MX>                 sys.exit()</span></p>

</div>

<p class=Body><span lang=ES-MX>Si la tecla que el usuario liberó es la tecla <span
class=Keycap><span style='font-variant:normal !important;text-transform:uppercase'>esc</span></span>,
se termina el programa. Recuerda, en Pygame debes llamar a la función </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>pygame.quit()</span></span><span
lang=ES-MX> antes de llamar a la función </span><span class=Literal><span
lang=ES-MX style='font-size:9.0pt;line-height:115%'>sys.exit()</span></span><span
lang=ES-MX>.</span></p>

<p class=Body><span lang=ES-MX>Las líneas 62 a 69 asignan False a una variable
de movimiento si la tecla correspondiente a esa dirección ha sido liberada.</span></p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber><span lang=ES-MX> </span>62.</span>            
if evento.key == K_LEFT or evento.key == ord('a'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 63.</span>                
moverseIzquierda = False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 64.</span>            
if evento.key == K_RIGHT or evento.key == ord('d'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 65.</span>                
moverseDerecha = False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 66.</span>            
if evento.key == K_UP or evento.key == ord('w'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 67.</span>                
moverseArriba = False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 68.</span>            
if evento.key == K_DOWN or evento.key == ord('s'):</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> </span><span
class=SourceLineNumber><span lang=ES-MX>69.</span></span><span lang=ES-MX>                
moverseAbajo = False</span></p>

</div>

<p class=Non-TOCHeading3><span lang=ES-MX>Teletransportando al Jugador</span></p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber><span lang=ES-MX> 70.</span></span><span
lang=ES-MX>             </span>if evento.key == ord('x'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> </span><span
class=SourceLineNumber><span lang=ES-MX>71.</span></span><span lang=ES-MX>                
jugador.top = random.randint(0, ALTURAVENTANA - jugador.height)</span></p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber><span lang=ES-MX> 72.</span></span><span
lang=ES-MX>                 jugador.left = random.randint(0, ANCHOVENTANA -
jugador.width)</span></p>

</div>

<p class=Body><span lang=ES-MX>También podemos agregar teletransporte al juego.
Si el usuario pulsa la tecla &quot;X&quot;, las líneas 71 y 72 asignarán a la
posición del cuadrado del jugador un lugar aleatorio de la ventana. Esto dará
al jugador la habilidad de teletransportarse por la ventana pulsando la tecla
&quot;X&quot;. Si bien no puede controlar a dónde se teletransportará; es
completamente aleatorio.</span></p>

<p class=Non-TOCHeading3>Manipulando el evento MOUSEBUTTONUP</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber> 74.</span>        
if evento.type == MOUSEBUTTONUP:</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> </span><span
class=SourceLineNumber><span lang=ES-MX>75.</span></span><span lang=ES-MX>            
comidas.append(pygame.Rect(evento.pos[0], evento.pos[1], TAMAÑOCOMIDA,
TAMAÑOCOMIDA))</span></p>

</div>

<p class=Body><span lang=ES-MX>Las entradas del ratón son manipuladas a través
de eventos, igual que las entradas del teclado. El evento </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>MOUSEBUTTONUP</span></span><span
lang=ES-MX> ocurre cuando el usuario suelta el botón del ratón luego de hacer
clic. Se asigna al atributo </span><span class=Literal><span lang=ES-MX
style='font-size:9.0pt;line-height:115%'>po</span></span><span lang=ES-MX>s del
objeto Event una tupla de dos enteros correspondientes a las coordenadas XY de
la posición del ratón en el momento del clic.</span></p>

<p class=Body><span lang=ES-MX>En la línea 75, la coordenada X se almacena en </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>evento.pos[0]</span></span><span
lang=ES-MX> y la coordenada Y se almacena en </span><span class=Literal><span
lang=ES-MX style='font-size:9.0pt;line-height:115%'>evento.pos[1]</span></span><span
lang=ES-MX>. La línea 75 crea un nuevo objeto Rect que representa una nueva
comida y la ubica donde ha ocurrido el evento </span><span class=Literal><span
lang=ES-MX style='font-size:9.0pt;line-height:115%'>MOUSEBUTTONUP</span></span><span
lang=ES-MX>. Al agregar un nuevo objeto Rect a la lista de comidas se muestra
en la pantalla un nuevo cuadrado de comida.</span></p>

<p class=Non-TOCHeading3><span lang=ES-MX>Desplazando al Jugador por la
Pantalla</span></p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber><span lang=ES-MX> 86.</span></span><span
lang=ES-MX>     <span class=SourceCodeComment># mover al jugador</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 87.</span></span><span
lang=ES-MX>     if moverseAbajo and jugador.bottom &lt; ALTURAVENTANA:</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 88.</span></span><span
lang=ES-MX>         jugador.top += VELOCIDADMOVIMIENTO</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 89.</span></span><span
lang=ES-MX>     if moverseArriba and jugador.top &gt; 0:</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 90.</span></span><span
lang=ES-MX>         jugador.top -= VELOCIDADMOVIMIENTO</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 91.</span></span><span
lang=ES-MX>     if moverseIzquierda and jugador.left &gt; 0:</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 92.</span></span><span
lang=ES-MX>         jugador.left -= VELOCIDADMOVIMIENTO</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 93.</span></span><span
lang=ES-MX>     if moverseDerecha and jugador.right &lt; ANCHOVENTANA:</span></p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber><span lang=ES-MX> 94.</span></span><span
lang=ES-MX>         jugador.right += VELOCIDADMOVIMIENTO</span></p>

</div>

<p class=Body><span lang=ES-MX>Hemos asignado a las variables de movimiento (</span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>moverseAbajo</span></span><span
lang=ES-MX>, </span><span class=Literal><span lang=ES-MX style='font-size:9.0pt;
line-height:115%'>moverseArriba</span></span><span lang=ES-MX>, </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>moverseIzquierda</span></span><span
lang=ES-MX> y </span><span class=Literal><span lang=ES-MX style='font-size:
9.0pt;line-height:115%'>moverseDerecha</span></span><span lang=ES-MX>) </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>True</span></span><span
lang=ES-MX> o </span><span class=Literal><span lang=ES-MX style='font-size:
9.0pt;line-height:115%'>False</span></span><span lang=ES-MX> dependiendo de qué
teclas haya presionado el jugador. Ahora desplazaremos el cuadrado del jugador
(representado por el objeto </span><span class=Literal><span lang=ES-MX
style='font-size:9.0pt;line-height:115%'>pygame.Rect</span></span><span
lang=ES-MX> almacenado en jugador) ajustando las coordenadas XY del jugador.</span></p>

<p class=Body><span lang=ES-MX>Si se ha asignado </span><span class=Literal><span
lang=ES-MX style='font-size:9.0pt;line-height:115%'>True</span></span><span
lang=ES-MX> a </span><span class=Literal><span lang=ES-MX style='font-size:
9.0pt;line-height:115%'>moverseAbajo</span></span><span lang=ES-MX> (y el borde
inferior del cuadrado del jugador no está por debajo del borde inferior de la
pantalla), la línea 88 moverá el cuadrado del jugador hacia abajo agregando </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>VELOCIDADMOVIMIENTO</span></span><span
lang=ES-MX> al valor actual del atributo </span><span class=Literal><span
lang=ES-MX style='font-size:9.0pt;line-height:115%'>top</span></span><span
lang=ES-MX> del jugador. Las líneas 89 a 94 hacen lo mismo para las otras tres
direcciones.</span></p>

<h2><a name="_Toc428130731"><span lang=ES-MX>El Método </span></a><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>colliderect()</span></span></h2>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber><span lang=ES-MX> 99.</span></span><span
lang=ES-MX>     <span class=SourceCodeComment># comprobar si el jugador ha
intersectado alguno de los cuadrados de comida</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>100.</span></span><span
lang=ES-MX>     for comida in comidas[:]:</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>101.</span></span><span
lang=ES-MX>         if jugador.colliderect(comida):</span></p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber><span lang=ES-MX>102.</span></span><span
lang=ES-MX>             comidas.remove(comida)</span></p>

</div>

<p class=Body><span lang=ES-MX>En el programa anterior Detección de Colisiones,
la función </span><span class=Literal><span lang=ES-MX style='font-size:9.0pt;
line-height:115%'>verifSuperposiciónRects()</span></span><span lang=ES-MX>
comprobaba si un rectángulo había colisionado con otro. Esta función fue
incluida en este libro para que entendieras cómo funciona el código detrás de
la detección de colisiones.</span></p>

<p class=Body><span lang=ES-MX>En este programa, puedes usar la función de
detección de colisiones que viene con Pygame. El método </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>colliderect()</span></span><span
lang=ES-MX> de los objetos pygame.Rect recibe como argumento otro objeto </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>pygame.Rect</span></span><span
lang=ES-MX> y devuelve </span><span class=Literal><span lang=ES-MX
style='font-size:9.0pt;line-height:115%'>True</span></span><span lang=ES-MX> en
caso de que los dos rectángulos colisionen y </span><span class=Literal><span
lang=ES-MX style='font-size:9.0pt;line-height:115%'>False</span></span><span
lang=ES-MX> si no colisionan.</span></p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCode><span class=SourceLineNumber><span lang=ES-MX>110.</span></span><span
lang=ES-MX>     relojPrincipal.tick(40)</span></p>

</div>

<p class=Body><span lang=ES-MX>El resto del código es similar al de los
programas de Entrada y Detección de Colisiones.</span></p>

<p class=Non-TOCHeading3><span lang=ES-MX>Resumen</span></p>

<p class=Body><span lang=ES-MX>Este capítulo presentó el concepto de detección
de colisiones, el cual se encuentra en muchos juegos gráficos. Detectar
colisiones entre dos rectángulos es fácil: se comprueba si alguna de las
esquinas de cada rectángulo está dentro del otro rectángulo. Esta comprobación
es tan común que Pygame incluye su propio método de detección de colisiones
para objetos </span><span class=Literal><span lang=ES-MX style='font-size:9.0pt;
line-height:115%'>pygame.Rect</span></span><span lang=ES-MX> llamado </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>colliderect()</span></span><span
lang=ES-MX>.</span></p>

<p class=Body><span lang=ES-MX>Los primeros juegos de este libro utilizaban la
consola de texto. La salida del programa se escribía en la pantalla y la
entrada era texto que el jugador escribía con el teclado. Los programas
gráficos, en cambio, pueden aceptar entradas del teclado y del ratón.</span></p>

<p class=MsoNormal><span lang=ES-MX>Por otra parte, estos programas pueden
responder a los eventos generados cuando el jugador pulsa o libera teclas
individuales. El usuario no necesita escribir una respuesta completa y pulsar <span
class=Keycap><span style='font-variant:normal !important;text-transform:uppercase'>intro</span></span>.
Esto permite que el programa responda instantáneamente, lo que resulta en
juegos mucho más interactivos.</span></p>

</div>

</body>

</html>
