<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=UTF-8">
<meta name=Generator content="Microsoft Word 14 (filtered)">
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"Franklin Gothic Demi";
	panose-1:2 11 7 3 2 1 2 2 2 4;}
@font-face
	{font-family:"Lucida Sans Typewriter";
	panose-1:2 11 5 9 3 5 4 3 2 4;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
h1
	{mso-style-link:"Heading 1 Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:24.0pt;
	margin-left:0in;
	line-height:115%;
	page-break-after:avoid;
	font-size:36.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	font-variant:small-caps;}
h2
	{mso-style-link:"Heading 2 Char";
	margin-top:10.0pt;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	line-height:115%;
	page-break-after:avoid;
	font-size:16.0pt;
	font-family:"Calibri","sans-serif";
	color:#1F497D;}
p.MsoCaption, li.MsoCaption, div.MsoCaption
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	text-align:center;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoAcetate, li.MsoAcetate, div.MsoAcetate
	{mso-style-link:"Balloon Text Char";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:8.0pt;
	font-family:"Tahoma","sans-serif";}
span.Heading1Char
	{mso-style-name:"Heading 1 Char";
	mso-style-link:"Heading 1";
	font-family:"Franklin Gothic Demi","sans-serif";
	font-variant:small-caps;
	font-weight:bold;}
span.Heading2Char
	{mso-style-name:"Heading 2 Char";
	mso-style-link:"Heading 2";
	font-family:"Times New Roman","serif";
	color:#1F497D;
	font-weight:bold;}
span.Definition
	{mso-style-name:Definition;
	font-family:"Calibri","sans-serif";
	font-weight:bold;}
span.URL
	{mso-style-name:URL;
	text-decoration:underline;}
span.Literal
	{mso-style-name:Literal;
	font-family:"Lucida Sans Typewriter";}
p.TopicsCoveredbox, li.TopicsCoveredbox, div.TopicsCoveredbox
	{mso-style-name:"Topics Covered box";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	background:#DBE5F1;
	border:none;
	padding:0in;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.TopicsCoveredboxCxSpFirst, li.TopicsCoveredboxCxSpFirst, div.TopicsCoveredboxCxSpFirst
	{mso-style-name:"Topics Covered boxCxSpFirst";
	margin:0in;
	margin-bottom:.0001pt;
	background:#DBE5F1;
	border:none;
	padding:0in;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.TopicsCoveredboxCxSpMiddle, li.TopicsCoveredboxCxSpMiddle, div.TopicsCoveredboxCxSpMiddle
	{mso-style-name:"Topics Covered boxCxSpMiddle";
	margin:0in;
	margin-bottom:.0001pt;
	background:#DBE5F1;
	border:none;
	padding:0in;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.TopicsCoveredboxCxSpLast, li.TopicsCoveredboxCxSpLast, div.TopicsCoveredboxCxSpLast
	{mso-style-name:"Topics Covered boxCxSpLast";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	background:#DBE5F1;
	border:none;
	padding:0in;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.SourceCode, li.SourceCode, div.SourceCode
	{mso-style-name:"Source Code";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:12.0pt;
	margin-left:0in;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SourceCodeCxSpFirst, li.SourceCodeCxSpFirst, div.SourceCodeCxSpFirst
	{mso-style-name:"Source CodeCxSpFirst";
	margin:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SourceCodeCxSpMiddle, li.SourceCodeCxSpMiddle, div.SourceCodeCxSpMiddle
	{mso-style-name:"Source CodeCxSpMiddle";
	margin:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SourceCodeCxSpLast, li.SourceCodeCxSpLast, div.SourceCodeCxSpLast
	{mso-style-name:"Source CodeCxSpLast";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:12.0pt;
	margin-left:0in;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
span.SourceLineNumber
	{mso-style-name:"Source Line Number";
	color:#7F7F7F;}
span.SourceCodeComment
	{mso-style-name:"Source Code Comment";
	color:#7F7F7F;}
p.ChapterNumber, li.ChapterNumber, div.ChapterNumber
	{mso-style-name:"Chapter Number";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:26.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";}
p.Body, li.Body, div.Body
	{mso-style-name:Body;
	margin-top:0in;
	margin-right:0in;
	margin-bottom:8.0pt;
	margin-left:0in;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.SourceCodeFilename, li.SourceCodeFilename, div.SourceCodeFilename
	{mso-style-name:"Source Code Filename";
	margin:0in;
	margin-bottom:.0001pt;
	text-align:right;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SourceCodeFilenameCxSpFirst, li.SourceCodeFilenameCxSpFirst, div.SourceCodeFilenameCxSpFirst
	{mso-style-name:"Source Code FilenameCxSpFirst";
	margin:0in;
	margin-bottom:.0001pt;
	text-align:right;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SourceCodeFilenameCxSpMiddle, li.SourceCodeFilenameCxSpMiddle, div.SourceCodeFilenameCxSpMiddle
	{mso-style-name:"Source Code FilenameCxSpMiddle";
	margin:0in;
	margin-bottom:.0001pt;
	text-align:right;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SourceCodeFilenameCxSpLast, li.SourceCodeFilenameCxSpLast, div.SourceCodeFilenameCxSpLast
	{mso-style-name:"Source Code FilenameCxSpLast";
	margin:0in;
	margin-bottom:.0001pt;
	text-align:right;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Lucida Sans Typewriter";}
p.Non-TOCHeading3, li.Non-TOCHeading3, div.Non-TOCHeading3
	{mso-style-name:"Non-TOC Heading 3";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	line-height:115%;
	font-size:14.0pt;
	font-family:"Calibri","sans-serif";
	color:#1F497D;
	font-weight:bold;
	font-style:italic;}
span.BalloonTextChar
	{mso-style-name:"Balloon Text Char";
	mso-style-link:"Balloon Text";
	font-family:"Tahoma","sans-serif";}
.MsoChpDefault
	{font-family:"Calibri","sans-serif";}
.MsoPapDefault
	{margin-bottom:10.0pt;
	line-height:115%;}
@page WordSection1
	{size:8.5in 11.0in;
	margin:1.0in 1.0in 1.0in 1.0in;}
div.WordSection1
	{page:WordSection1;}
 /* List Definitions */
 ol
	{margin-bottom:0in;}
ul
	{margin-bottom:0in;}
-->
</style>

</head>

<body lang=EN-US>

<div class=WordSection1>

<table class=MsoTableGrid border=0 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=101 rowspan=2 valign=top style='width:60.85pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=ChapterNumber><img width=84 height=96 id="Picture 160"
  src="19_files/image001.jpg"></p>
  </td>
  <td width=637 valign=top style='width:381.95pt;border:none;border-bottom:
  solid windowtext 1.0pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=ChapterNumber>Chapter 19</p>
  </td>
 </tr>
 <tr>
  <td width=637 valign=top style='width:381.95pt;border:none;padding:0in 5.4pt 0in 5.4pt'>
  <h1 style='line-height:normal'><a name="_Toc428130732"><span
  style='font-variant:normal !important;text-transform:uppercase'>Sonidos e
  Imágenes</span></a></h1>
  </td>
 </tr>
</table>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt;
background:#DBE5F1'>

<p class=TopicsCoveredboxCxSpFirst style='background:#DBE5F1;border:none;
padding:0in'><span lang=ES-MX>Temas Tratados en Este Capítulo:</span></p>

<p class=TopicsCoveredboxCxSpMiddle style='margin-left:.25in;text-indent:-.25in;
background:#DBE5F1;border:none;padding:0in'><span lang=ES-MX style='font-family:
Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=ES-MX>Archivos de Sonido e Imagen</span></p>

<p class=TopicsCoveredboxCxSpMiddle style='margin-left:.25in;text-indent:-.25in;
background:#DBE5F1;border:none;padding:0in'><span style='font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Dibujando Sprites</p>

<p class=TopicsCoveredboxCxSpMiddle style='margin-left:.25in;text-indent:-.25in;
background:#DBE5F1;border:none;padding:0in'><span lang=ES-MX style='font-family:
Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=ES-MX>La Función pygame.image.load()</span></p>

<p class=TopicsCoveredboxCxSpMiddle style='margin-left:.25in;text-indent:-.25in;
background:#DBE5F1;border:none;padding:0in'><span lang=ES-MX style='font-family:
Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=ES-MX>El Tipo de Datos pygame.mixer.Sound</span></p>

<p class=TopicsCoveredboxCxSpLast style='margin-left:.25in;text-indent:-.25in;
background:#DBE5F1;border:none;padding:0in'><span lang=ES-MX style='font-family:
Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=ES-MX>El Módulo pygame.mixer.music</span></p>

</div>

<p class=Body><span lang=ES-MX>En los últimos dos capítulos, hemos aprendido
cómo hacer programas GUI que muestran gráficos y pueden aceptar entradas del
teclado y del ratón. También hemos aprendido cómo dibujar diferentes formas. En
este capítulo aprenderemos cómo mostrar fotos e imágenes (llamadas sprites) y
reproducir sonidos y música en nuestros juegos.</span></p>

<p class=Body><span class=Definition><span lang=ES-MX>Sprite</span></span><span
lang=ES-MX> es el nombre dado a una imagen individual bidimensional que se usa
como parte de los gráficos en la pantalla. La Figura 19-1 muestra algunos
ejemplos de sprites.</span></p>

<p class=MsoNormal align=center style='text-align:center'><img width=544
height=254 id="Picture 89" src="19_files/image002.jpg"></p>

<p class=MsoCaption><span lang=ES-MX>Figura 19-1: Algunos ejemplos de sprites.</span></p>

<p class=MsoNormal><span lang=ES-MX>La Figura 19-2 muestra sprites utilizados
en una escena completa.</span></p>

<p class=MsoNormal align=center style='text-align:center'><img width=419
height=358 id="Picture 87" src="19_files/image003.jpg"></p>

<p class=MsoCaption><span lang=ES-MX>Figura 19-2: Un ejemplo de una escena
completa, con sprites dibujados sobre una imagen de fondo.</span></p>

<p class=Body><span lang=ES-MX>Los sprites se dibujan sobre una imagen de
fondo. Nota que puedes invertir el sprite horizontalmente o verticalmente de
modo que las imágenes se den vuelta. Puedes dibujar el mismo sprite múltiples
veces en la misma ventana. También puedes redimensionar los sprites para que
sean más grandes o más pequeños que la imagen original. Podemos considerar a la
imagen de fondo como un gran sprite.</span></p>

<p class=Body><span lang=ES-MX>El siguiente programa demostrará cómo reproducir
sonidos y dibujar sprites usando Pygame.</span></p>

<h2><a name="_Toc428130733"><span lang=ES-MX>Archivos de Sonido e Imagen</span></a></h2>

<p class=Body><span lang=ES-MX>Los sprites son almacenados en archivos de
imagen en tu computadora. Pygame puede usar varios formatos diferentes de
imagen. Puedes darte cuenta cuál es el formato de un archivo mirando al final
del nombre de </span><span class=Definition><span lang=ES-MX>archivo</span></span><span
lang=ES-MX> (después del último punto). Esto se denomina la extensión del
archivo. Por ejemplo, el archivo <em>jugador.png</em> tiene formato PNG. Los
formatos de imagen soportados por Pygame incluyen BMP, PNG, JPG, y GIF.</span></p>

<p class=Body><span lang=ES-MX>Puedes descargar imágenes de tu navegador. En la
mayoría de los navegadores, tienes que hacer clic con el botón derecho sobre
una imagen en una página web y seleccionar Guardar del menú que aparece.
Recuerda en qué lugar de tu disco guardas el archivo de imagen. Copia el
archivo de la imagen descargada a la misma carpeta que el archivo <em>.py</em>
de tu programa de Python. También puedes crear tus propias imágenes con un
programa de dibujo como MS Paint o Tux Paint.</span></p>

<p class=Body><span lang=ES-MX>Los formatos de archivos de sonido que Pygame
soporta son MID, WAV y MP3. Puedes descargar efectos de sonido de Internet
igual que los archivos de imagen. Deben estar en uno de estos tres formatos. Si
tu computadora tiene un micrófono, también puedes grabar sonidos y crear tus
propios archivos WAV para usar en tus juegos.</span></p>

<h2><a name="_Toc428130734"><span lang=ES-MX>Programa Sprites y Sonidos</span></a></h2>

<p class=Body><span lang=ES-MX>Este programa es igual que el programa de
entradas del teclado y del ratón del capítulo anterior. Sin embargo, en este
programa usaremos sprites en lugar de cuadrados sin dibujos. Usaremos un sprite
de una personita en lugar del cuadrado blanco del jugador, y un sprite de
cerezas reemplazando a los cuadrados verdes de comida. También reproduciremos
música de fondo y un efecto de sonido cuando el sprite del jugador se coma una
de las cerezas.</span></p>

<h2><a name="_Toc428130735"><span lang=ES-MX>Código Fuente del Programa Sprites
y Sonidos</span></a></h2>

<p class=Body><span lang=ES-MX>Si sabes cómo usar software de gráficos como
Photoshop o MS Paint, puedes dibujar tus propias imágenes. Si no sabes usar
estos programas, puedes descargar gráficos de sitios web y usar esos archivos
de imagen. Lo mismo vale para archivos de música y sonido. También puedes usar
imágenes de sitios web o de una cámara digital. Puedes descargar los archivos
de imagen y sonido del sitio web de este libro en <span class=URL><u>http://invpy.com/es</u></span>.</span></p>

<p class=Body><span lang=ES-MX>Si obtienes errores luego de escribir este
código, compara lo que has escrito con el código del libro usando la
herramienta diff online en  <span class=URL><u>http://invpy.com/es/diff/spritesYsonidos</u></span>.</span></p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeFilename>spritesYsonidos.py</p>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>  1.</span> import
pygame, sys, time, random</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  2.</span> from
pygame.locals import *</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  3. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  4.</span> <span
class=SourceCodeComment># configurar pygame</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  </span><span
class=SourceLineNumber><span lang=ES-MX>5.</span></span><span lang=ES-MX>
pygame.init()</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 
6.</span></span><span lang=ES-MX> relojPrincipal = pygame.time.Clock()</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 
7. </span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>  8.</span></span><span
lang=ES-MX> <span class=SourceCodeComment># configurar la ventana</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 
9.</span></span><span lang=ES-MX> ANCHOVENTANA = 400</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 10.</span></span><span
lang=ES-MX> ALTOVENTANA = 400</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 11.</span></span><span
lang=ES-MX> superficieVentana = pygame.display.set_mode((ANCHOVENTANA, ALTOVENTANA),
0, 32)</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 12.</span></span><span
lang=ES-MX> pygame.display.set_caption('Sprites y Sonido')</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 13.
</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 14.</span></span><span
lang=ES-MX> <span class=SourceCodeComment># configurar los colores</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 15.</span></span><span
lang=ES-MX> NEGRO = (0, 0, 0)</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 16.
</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 17.</span></span><span
lang=ES-MX> <span class=SourceCodeComment># configurar la estructura de bloque
de datos</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 18.</span></span><span
lang=ES-MX> jugador = pygame.Rect(300, 100, 40, 40)</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 19.</span></span><span
lang=ES-MX> imagenJugador = pygame.image.load('jugador.png')</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 20.</span></span><span
lang=ES-MX> imagenEstiradaJugador = pygame.transform.scale(imagenJugador, (40,
40))</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 21.</span></span><span
lang=ES-MX> imagenComida = pygame.image.load(cereza.png')</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 22.</span></span><span
lang=ES-MX> comidas = []</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> </span>23.</span>
for i in range(20):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 24.</span>     comidas.append(pygame.Rect(random.randint(0,
ANCHOVENTANA - 20), random.randint(0, ALTOVENTANA - 20), 20, 20))</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> </span><span
class=SourceLineNumber><span lang=ES-MX>25. </span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 26.</span></span><span
lang=ES-MX> contadorComida = 0</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 27.</span></span><span
lang=ES-MX> NUEVACOMIDA = 40</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 28.
</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 29.</span></span><span
lang=ES-MX> <span class=SourceCodeComment># configurar variables del teclado</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 30.</span></span><span
lang=ES-MX> moverseIzquierda = False</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 31.</span></span><span
lang=ES-MX> moverseDerecha = False</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 32.</span></span><span
lang=ES-MX> moverseArriba = False</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 33.</span></span><span
lang=ES-MX> moverseAbajo = False</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 34.
</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 35.</span></span><span
lang=ES-MX> VELOCIDADMOVIMIENTO = 6</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 36.
</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 37.</span></span><span
lang=ES-MX> <span class=SourceCodeComment># configurar música</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 38.</span></span><span
lang=ES-MX> sonidoRecolección = pygame.mixer.Sound('recolección.wav')</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 39.</span></span><span
lang=ES-MX> pygame.mixer.music.load('musicaDeFondo.mid')</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 40.</span></span><span
lang=ES-MX> pygame.mixer.music.play(-1, 0.0)</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 41.</span></span><span
lang=ES-MX> músicaSonando = True</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 42.
</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 43.</span></span><span
lang=ES-MX> <span class=SourceCodeComment># ejecutar el bucle del juego</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 44.</span></span><span
lang=ES-MX> while True:</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 45.</span></span><span
lang=ES-MX>     <span class=SourceCodeComment># comprobar si se ha disparado el
evento QUIT (salir)</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> </span>46.</span>    
for evento in pygame.event.get():</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 47.</span>        
if evento.type == QUIT:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 48.</span>            
pygame.quit()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 49.</span>            
sys.exit()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 50.</span>        
if evento.type == KEYDOWN:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> </span><span
class=SourceLineNumber><span lang=ES-MX>51.</span></span><span lang=ES-MX>            
<span class=SourceCodeComment># cambiar las variables del teclado</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 52.</span></span><span
lang=ES-MX>             </span>if evento.key == K_LEFT or evento.key ==
ord('a'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 53.</span>                
moverseDerecha = False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 54.</span>                
moverseIzquierda = True</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 55.</span>            
if evento.key == K_RIGHT or evento.key == ord('d'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 56.</span>                
moverseIzquierda = False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 57.</span>                
moverseDerecha = True</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 58.</span>            
if evento.key == K_UP or evento.key == ord('w'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 59.</span>                
moverseAbajo = False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 60.</span>                
moverseArriba = True</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 61.</span>            
if evento.key == K_DOWN or evento.key == ord('s'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 62.</span>                
moverseArriba = False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 63.</span>                
moverseAbajo= True</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 64.</span>        
if evento.type == KEYUP:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 65.</span>            
if evento.key == K_ESCAPE:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 66.</span>                
pygame.quit()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 67.</span>                
sys.exit()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 68.</span>            
if evento.key == K_LEFT or evento.key == ord('a'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 69.</span>                
moverseIzquierda = False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 70.</span>            
if evento.key == K_RIGHT or evento.key == ord('d'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 71.</span>                
moverseDerecha = False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 72.</span>            
if evento.key == K_UP or evento.key == ord('w'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 73.</span>                
moverseArriba = False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 74.</span>            
if evento.key == K_DOWN or evento.key == ord('s'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 75.</span>                
moverseAbajo = False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 76.</span>            
if evento.key == ord('x'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> </span><span
class=SourceLineNumber><span lang=ES-MX>77.</span></span><span lang=ES-MX>                
jugador.top = random.randint(0, ALTOVENTANA- jugador.height)</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 78.</span></span><span
lang=ES-MX>                 jugador.left = random.randint(0, ANCHOVENTANA- jugador.width)</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> </span>79.</span>            
if evento.key == ord('m'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 80.</span>                
if músicaSonando:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 81.</span>                     pygame.mixer.music.stop()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 82.</span>                
else:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> </span><span
class=SourceLineNumber><span lang=ES-MX>83.</span></span><span lang=ES-MX>                    
pygame.mixer.music.play(-1, 0.0)</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 84.</span></span><span
lang=ES-MX>                 músicaSonando = not músicaSonando</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> </span>85.
</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 86.</span>        
if evento.type == MOUSEBUTTONUP:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 87.</span>            
comidas.append(pygame.Rect(evento.pos[0] - 10, evento.pos[1] - 10, 20, 20))</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> </span><span
class=SourceLineNumber><span lang=ES-MX>88. </span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 89.</span></span><span
lang=ES-MX>     contadorComida += 1</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 90.</span></span><span
lang=ES-MX>     if contadorComida &gt;= NUEVACOMIDA:</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 91.</span></span><span
lang=ES-MX>         <span class=SourceCodeComment># agregar nueva comida</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 92.</span></span><span
lang=ES-MX>         contadorComida = 0</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 93.</span></span><span
lang=ES-MX>         comidas.append(pygame.Rect(random.randint(0, ANCHOVENTANA -
20), random.randint(0, ALTOVENTANA - 20), 20, 20))</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 94.
</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 95.</span></span><span
lang=ES-MX>     <span class=SourceCodeComment># pintar el fondo negro sobre la
superficie</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> </span>96.</span>    
superficieVentana.fill(NEGRO)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 97. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 98.</span>     <span
class=SourceCodeComment># move the player</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 99.</span>     if moverseAbajo
and jugador.bottom &lt; ALTOVENTANA:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>100.</span></span><span
lang=ES-MX>         jugador.top += VELOCIDADMOVIMIENTO</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>101.</span></span><span
lang=ES-MX>     if moverseArriba and jugador.top &gt; 0:</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>102.</span></span><span
lang=ES-MX>         jugador.top -= VELOCIDADMOVIMIENTO</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>103.</span></span><span
lang=ES-MX>     if moverseIzquierda and jugador.left &gt; 0:</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>104.</span></span><span
lang=ES-MX>         jugador.left -= VELOCIDADMOVIMIENTO</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>105.</span></span><span
lang=ES-MX>     if moverseDerecha and jugador.right &lt; ANCHOVENTANA:</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>106.</span></span><span
lang=ES-MX>         jugador.right += VELOCIDADMOVIMIENTO</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>107.
</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>108.
</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>109.</span></span><span
lang=ES-MX>     <span class=SourceCodeComment># dibujar el bloque sobre la
superficie</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>110.</span></span><span
lang=ES-MX>     superficieVentana.blit(imagenEstiradaJugador, jugador)</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>111.
</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>112.</span></span><span
lang=ES-MX>     <span class=SourceCodeComment># comprobar si el jugador ha
intersectado alguno de los cuadrados de comida</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>113.</span></span><span
lang=ES-MX>     for comida in comidas[:]:</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>114.</span></span><span
lang=ES-MX>         if jugador.colliderect(comida):</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>115.</span></span><span
lang=ES-MX>             comidas.remove(comida)</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>116.</span></span><span
lang=ES-MX>             jugador = pygame.Rect(jugador.left, jugador.top,
jugador.width + 2, jugador.height + 2)</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>117.</span></span><span
lang=ES-MX>             imagenEstiradaJugador =
pygame.transform.scale(imagenJugador, (jugador.width, jugador.height))</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>118.</span></span><span
lang=ES-MX>             if músicaSonando:</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>119.</span></span><span
lang=ES-MX>                 sonidoRecolección.play()</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>120.
</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>121.</span></span><span
lang=ES-MX>     <span class=SourceCodeComment># dibujar la comida</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>122.</span></span><span
lang=ES-MX>     for comida in comidas:</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>123.</span></span><span
lang=ES-MX>         superficieVentana.blit(imagenComida, comida)</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>124.
</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>125.</span></span><span
lang=ES-MX>     <span class=SourceCodeComment># dibujar la ventana sobre la
pantalla</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>126.</span>    
pygame.display.update()</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>127.</span>     relojPrincipal.tick(40)</p>

</div>

<p class=MsoNormal align=center style='text-align:center'><img width=228
height=243 id="Picture 106" src="19_files/image004.jpg"></p>

<p class=MsoCaption><span lang=ES-MX>Figura 19-3: Una captura de pantalla
modificada del juego Sprites y Sonidos.</span></p>

<p class=Non-TOCHeading3><span lang=ES-MX>Configurando la Ventana y la
Estructura de Datos</span></p>

<p class=Body><span lang=ES-MX>La mayoría del código de este programa es igual
al programa Detección de Colisiones del capítulo anterior. Nos enfocaremos sólo
en las partes que agregan sprites y sonido.</span></p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCode><span class=SourceLineNumber><span lang=ES-MX> 12.</span></span><span
lang=ES-MX> pygame.display.set_caption('Sprites y Sonido')</span></p>

</div>

<p class=Body><span lang=ES-MX>Primero, configuramos la leyenda de la barra de
título a una cadena que describa este programa en la línea 12. Pasamos la
cadena <span class=URL><u>'Sprites y Sonido'</u></span> a la función <span
class=URL><u>pygame.display.set_caption()</u></span>.</span></p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber><span lang=ES-MX> 17.</span></span><span
lang=ES-MX> <span class=SourceCodeComment># configurar la estructura de bloque
de datos</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 18.</span></span><span
lang=ES-MX> jugador = pygame.Rect(300, 100, 40, 40)</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 19.</span></span><span
lang=ES-MX> imagenJugador = pygame.image.load('jugador.png')</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 20.</span></span><span
lang=ES-MX> imagenEstiradaJugador = pygame.transform.scale(imagenJugador, (40,
40))</span></p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber><span lang=ES-MX> 21.</span></span><span
lang=ES-MX> imagenComida = pygame.image.load(cereza.png')</span></p>

</div>

<p class=Body><span lang=ES-MX>Vamos a usar tres variables diferentes para
representar al jugador, a diferencia de los programas anteriores que sólo
usaban una.</span></p>

<p class=Body><span lang=ES-MX>La variable </span><span class=Literal><span
lang=ES-MX style='font-size:9.0pt;line-height:115%'>jugador</span></span><span
lang=ES-MX> en la línea 18 almacenará un objeto rect que registra el tamaño y
la posición del jugador. La variable no contiene la imagen del jugador, sólo su
tamaño y posición. Al principio del programa, la esquina superior izquierda del
jugador se ubica en (300, 100) y el jugador tiene una altura y un ancho de 40
píxeles para empezar.</span></p>

<p class=Body><span lang=ES-MX>La segunda variable de la línea 19 que
representa al jugador es </span><span class=Literal><span lang=ES-MX
style='font-size:9.0pt;line-height:115%'>imagenJugador</span></span><span
lang=ES-MX>. la función </span><span class=Literal><span lang=ES-MX
style='font-size:9.0pt;line-height:115%'>pygame.image.load()</span></span><span
lang=ES-MX> recibe una cadena con el nombre de archivo de la imagen a cargar.
El valor de retorno es un objeto Surface que tiene el gráfico del archivo
dibujado sobre su superficie. Guardamos este objeto Surface dentro de </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>imagenJugador</span></span><span
lang=ES-MX>.</span></p>

<p class=Body><span lang=ES-MX>La tercera variable se explica en la próxima
sección.</span></p>

<h2><a name="_Toc428130736"><span lang=ES-MX>La Función </span></a><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>pygame.transform.scale()</span></span></h2>

<p class=Body><span lang=ES-MX>En la línea 20, utilizamos una nueva función en
el módulo pygame.transform. La función </span><span class=Literal><span
lang=ES-MX style='font-size:9.0pt;line-height:115%'>pygame.transform.scale()</span></span><span
lang=ES-MX> puede reducir o agrandar un sprite. El primer argumento es un
objeto pygame.Surface con la imaten dibujada sobre él. El segundo argumento es
una tupla con los nuevos ancho y altura de la imagen en el primer argumento. La
función The </span><span class=Literal><span lang=ES-MX style='font-size:9.0pt;
line-height:115%'>pygame.transform.scale()</span></span><span lang=ES-MX>
devuelve un objeto </span><span class=Literal><span lang=ES-MX
style='font-size:9.0pt;line-height:115%'>pygame.Surface</span></span><span
lang=ES-MX> con la imagen dibujada en un nuevo tamaño. Almacenaremos la imagen
original en la variable imagenJugador, y la imagen estirada se guardará en la
variable </span><span class=Literal><span lang=ES-MX style='font-size:9.0pt;
line-height:115%'>imagenEstiradaJugador</span></span><span lang=ES-MX>.</span></p>

<p class=Body><span lang=ES-MX>En la línea 21, llamamos nuevamente a </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>pygame.image.load()</span></span><span
lang=ES-MX> para crear un objeto Surface con la imagen de una cereza dibujada
sobre él. Asegúrate de tener los archivos <em>jugador.png</em> y <em>cereza.png</em>
en la misma carpeta que el archivo <em>spritesYsonido.py</em>, pues de otro
modo Pygame no podrá encontrarlos y dará un error.</span></p>

<p class=Body><span lang=ES-MX>&nbsp;</span></p>

<p class=Non-TOCHeading3><span lang=ES-MX>Activando y Desactivando el Sonido</span></p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber><span lang=ES-MX> 37.</span></span><span
lang=ES-MX> <span class=SourceCodeComment># configurar música</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 38.</span></span><span
lang=ES-MX> sonidoRecolección = pygame.mixer.Sound('recolección.wav')</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 39.</span></span><span
lang=ES-MX> pygame.mixer.music.load('musicaDeFondo.mid')</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX> 40.</span></span><span
lang=ES-MX> pygame.mixer.music.play(-1, 0.0)</span></p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber><span lang=ES-MX> 41.</span></span><span
lang=ES-MX> músicaSonando = True</span></p>

</div>

<p class=Body><span lang=ES-MX>A continuación necesitas cargar los archivos de
sonido. Hay dos módulos para sonido en Pygame. El módulo pygame.mixer puede
reproducir efectos de sonido breves durante el juego. El módulo
pygame.mixer.music puede reproducir música de fondo.</span></p>

<p class=Body><span lang=ES-MX>Llamamos a la función constructor </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>pygame.mixer.Sound()</span></span><span
lang=ES-MX> para crear un objeto </span><span class=Literal><span lang=ES-MX
style='font-size:9.0pt;line-height:115%'>pygame.mixer.Sound</span></span><span
lang=ES-MX> (llamado objeto Sound por brevedad). Este objeto tiene un método </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>play()</span></span><span
lang=ES-MX> que reproducirá el efecto de sonido al ser llamado.</span></p>

<p class=Body><span lang=ES-MX>La línea 39 llama a </span><span class=Literal><span
lang=ES-MX style='font-size:9.0pt;line-height:115%'>pygame.mixer.music.load()</span></span><span
lang=ES-MX> para cargar la música de fondo. La línea 40 llama a </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>pygame.mixer.music.play()</span></span><span
lang=ES-MX> para comenzar a reproducir la música de fondo. El primer parámetro
indica a Pygame cuántas veces repetir la música de fondo luego de la primera
vez que se reproduce. Es decir que pasar </span><span class=Literal><span
lang=ES-MX style='font-size:9.0pt;line-height:115%'>5</span></span><span
lang=ES-MX> como argumento hará que Pygame reproduzca la música de fondo 6
veces. </span><span class=Literal><span lang=ES-MX style='font-size:9.0pt;
line-height:115%'>-1</span></span><span lang=ES-MX> es un valor especial, y
pasarlo como el primer parámetro hace que la música de fondo se repita siempre.</span></p>

<p class=Body><span lang=ES-MX>El segundo parámetro de </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>pygame.mixer.music.play()</span></span><span
lang=ES-MX> es el punto en que el archivo de sonido comienza su reproducción.
Pasar </span><span class=Literal><span lang=ES-MX style='font-size:9.0pt;
line-height:115%'>0.0</span></span><span lang=ES-MX> hace que la música
comience desde el principio. Pasar </span><span class=Literal><span lang=ES-MX
style='font-size:9.0pt;line-height:115%'>2.5</span></span><span lang=ES-MX>
como segundo parámetro hace que la música de fondo comience dos segundos y
medio después del principio.</span></p>

<p class=Body><span lang=ES-MX>Finalmente, la variable </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>musicPlaying</span></span><span
lang=ES-MX> tendrá un valor Booleano que indica al programa si debe reproducir
la música de fondo y los efectos o no. Es bueno dar al jugador la opción de
poder ejecutar el programa en modo silencioso.</span></p>

<p class=Non-TOCHeading3><span lang=ES-MX>Activando y Desactivando el Sonido</span></p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber><span lang=ES-MX> 79.</span></span><span
lang=ES-MX>             </span>if evento.key == ord('m'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 80.</span>                
if músicaSonando:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 81.</span>                    
pygame.mixer.music.stop()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 82.</span>                
else:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> </span><span
class=SourceLineNumber><span lang=ES-MX>83.</span></span><span lang=ES-MX>                    
pygame.mixer.music.play(-1, 0.0)</span></p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber><span lang=ES-MX> 84.</span></span><span
lang=ES-MX>                 músicaSonando = not músicaSonando</span></p>

</div>

<p class=Body><span lang=ES-MX>La tecla M activa y desactiva la música de
fondo. Si </span><span class=Literal><span lang=ES-MX style='font-size:9.0pt;
line-height:115%'>músicaSonando</span></span><span lang=ES-MX> tiene asignado
el valor </span><span class=Literal><span lang=ES-MX style='font-size:9.0pt;
line-height:115%'>True</span></span><span lang=ES-MX>, la música de fondo está
reproduciéndose y debemos desactivar la música llamando a </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>pygame.mixer.music.stop()</span></span><span
lang=ES-MX>. Si músicaSonando tiene asignado </span><span class=Literal><span
lang=ES-MX style='font-size:9.0pt;line-height:115%'>False</span></span><span
lang=ES-MX>, entonces la música de fondo no está sonando y debería activarse
llamando a </span><span class=Literal><span lang=ES-MX style='font-size:9.0pt;
line-height:115%'>pygame.mixer.music.play()</span></span><span lang=ES-MX>.</span></p>

<p class=Body><span lang=ES-MX>Finalmente, sin importar el estado actual,
queremos conmutar el valor de </span><span class=Literal><span lang=ES-MX
style='font-size:9.0pt;line-height:115%'>músicaSonando</span></span><span
lang=ES-MX>. </span><span class=Definition><span lang=ES-MX>Conmutar</span></span><span
lang=ES-MX> un Booleano significa asignar el opuesto a su valor. La línea </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>músicaSonando
= not músicaSonando</span></span><span lang=ES-MX> asigna </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>False</span></span><span
lang=ES-MX> a la variable si tiene el valor </span><span class=Literal><span
lang=ES-MX style='font-size:9.0pt;line-height:115%'>True</span></span><span
lang=ES-MX>, o le asigna </span><span class=Literal><span lang=ES-MX
style='font-size:9.0pt;line-height:115%'>True</span></span><span lang=ES-MX> si
tiene el valor </span><span class=Literal><span lang=ES-MX style='font-size:
9.0pt;line-height:115%'>False</span></span><span lang=ES-MX>. Piensa en esta
conmutación como lo que ocurre cuando accionas un interruptor de luz: mover el
interruptor cambia al estado opuesto.</span></p>

<p class=Non-TOCHeading3><span lang=ES-MX>Dibujando al Jugador sobre la Ventana</span></p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber><span lang=ES-MX>109.</span></span><span
lang=ES-MX>     <span class=SourceCodeComment># dibujar el bloque sobre la
superficie</span></span></p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber><span lang=ES-MX>110.</span></span><span
lang=ES-MX>     superficieVentana.blit(imagenEstiradaJugador, jugador)</span></p>

</div>

<p class=Body><span lang=ES-MX>Recuerda que el valor almacenado en </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>imagenEstiradaJugador</span></span><span
lang=ES-MX> es un objeto Surface. La línea 110 dibuja el sprite del jugador
sobre el objeto Surface de la ventana (el cual se almacena en </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>superficieVentana</span></span><span
lang=ES-MX>).</span></p>

<p class=Body><span lang=ES-MX>El segundo parámetro del método </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>blit()</span></span><span
lang=ES-MX> es un objeto Rect que especifica dónde en el objeto Surface se
dibujará el sprite. El objeto Rect almacenado en </span><span class=Literal><span
lang=ES-MX style='font-size:9.0pt;line-height:115%'>jugador</span></span><span
lang=ES-MX> es el que registra la posición del jugador en la ventana.</span></p>

<p class=Non-TOCHeading3><span lang=ES-MX>Comprobando si el Jugador Ha
Colisionado con Cerezas</span></p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber><span lang=ES-MX>114.</span></span><span
lang=ES-MX>         if jugador.colliderect(comida):</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>115.</span></span><span
lang=ES-MX>             comidas.remove(comida)</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>116.</span></span><span
lang=ES-MX>             jugador = pygame.Rect(jugador.left, jugador.top,
jugador.width + 2, jugador.height + 2)</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>117.</span></span><span
lang=ES-MX>             imagenEstiradaJugador =
pygame.transform.scale(imagenJugador, (jugador.width, jugador.height))</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>118.</span></span><span
lang=ES-MX>             if músicaSonando:</span></p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber><span lang=ES-MX>119.</span></span><span
lang=ES-MX>                 sonidoRecolección.play()</span></p>

</div>

<p class=Body><span lang=ES-MX>Este código es similar al de programas
anteriores, pero hay un par de líneas nuevas. Llamamos al método </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>play()</span></span><span
lang=ES-MX> sobre el objeto Sonido almacenado en la variable </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>sonidoRecolección</span></span><span
lang=ES-MX>. Pero sólo lo hacemos si el valor de músicaSonando es </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>True</span></span><span
lang=ES-MX> (lo que significa que el sonido está activado).</span></p>

<p class=Body><span lang=ES-MX>Cuando el jugador se come una de las cerezas, su
altura y ancho se incrementan en dos píxeles. En la línea 116 se asigna a
jugador un nuevo objeto Rect que es 2 píxeles más grande que el viejo objeto
Rect.</span></p>

<p class=Body><span lang=ES-MX>Aunque el objeto Rect representa la posición y
el tamaño del jugador, la imagen del jugador se almacena en </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>imagenEstiradaJugador</span></span><span
lang=ES-MX> como un objeto Surface. Crearemos una nueva imagen estirada
llamando a </span><span class=Literal><span lang=ES-MX style='font-size:9.0pt;
line-height:115%'>pygame.transform.scale()</span></span><span lang=ES-MX>.
Asegúrate de pasarle a esta función el objeto Surface original en </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>imagenJugador</span></span><span
lang=ES-MX> y no </span><span class=Literal><span lang=ES-MX style='font-size:
9.0pt;line-height:115%'>imagenEstiradaJugador</span></span><span lang=ES-MX>.</span></p>

<p class=Body><span lang=ES-MX>Estirar una imegen suele distorsionarla un poco.
Si continuamos estirando la misma imagen una y otra vez, las distorsiones se
acumulan rápidamente. Pero si estiramos la imagen original a un nuevo tamaño,
distorsionamos la imagen una sola vez. Es por esto que usamos </span><span
class=Literal><span lang=ES-MX style='font-size:9.0pt;line-height:115%'>imagenJugador</span></span><span
lang=ES-MX> como primer argumento de </span><span class=Literal><span
lang=ES-MX style='font-size:9.0pt;line-height:115%'>pygame.transform.scale()</span></span><span
lang=ES-MX>.</span></p>

<p class=Non-TOCHeading3><span lang=ES-MX>Dibujando las Cerezas sobre la
Ventana</span></p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber><span lang=ES-MX>121.</span></span><span
lang=ES-MX>     <span class=SourceCodeComment># dibujar la comida</span></span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber><span lang=ES-MX>122.</span></span><span
lang=ES-MX>     for comida in comidas:</span></p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber><span lang=ES-MX>123.</span></span><span
lang=ES-MX>         superficieVentana.blit(imagenComida, comida)</span></p>

</div>

<p class=Body><span lang=ES-MX>En los programas anteriores llamamos a la
función </span><span class=Literal><span lang=ES-MX style='font-size:9.0pt;
line-height:115%'>pygame.draw.rect()</span></span><span lang=ES-MX> para
dibujar un cuadrado verde por cada objeto Rect guardado en la lista de comidas.
En cambio, en este programa queremos dibujar el sprite cereza en su lugar.
Llamamos al método </span><span class=Literal><span lang=ES-MX
style='font-size:9.0pt;line-height:115%'>blit()</span></span><span lang=ES-MX>
y le pasamos el objeto Surface almacenado en </span><span class=Literal><span
lang=ES-MX style='font-size:9.0pt;line-height:115%'>imagenComida</span></span><span
lang=ES-MX>. (Este es el objeto Surface con la imagen de las cerezas).</span></p>

<p class=Body><span lang=ES-MX>La variable </span><span class=Literal><span
lang=ES-MX style='font-size:9.0pt;line-height:115%'>comida</span></span><span
lang=ES-MX> (la cual contiene una vez a cada uno de los objetos Rect en la
lista </span><span class=Literal><span lang=ES-MX style='font-size:9.0pt;
line-height:115%'>comidas</span></span><span lang=ES-MX> por cada iteración del
bucle) indica al método blit() dónde dibujar </span><span class=Literal><span
lang=ES-MX style='font-size:9.0pt;line-height:115%'>imagenComida</span></span><span
lang=ES-MX>.</span></p>

<p class=Non-TOCHeading3><span lang=ES-MX>Resumen</span></p>

<p class=Body><span lang=ES-MX>Este capítulo ha agregado imágenes y sonido a
tus juegos. Las imágenes (llamadas sprites) se ven mucho mejor que las siluetas
de formas simples usadas en los programas anteriores. El juego presentado en
este capítulo también reproduce música de fondo y efectos de sonido.</span></p>

<p class=Body><span lang=ES-MX>Los sprites pueden ser escalados (es decir,
estirados) a tamaños mayores o menores. De este modo podemos mostrar sprites de
cualquier tamaño que queramos. Esto será útil para el juego presentado en el
próximo capítulo.</span></p>

<p class=MsoNormal><span lang=ES-MX>Ahora que sabemos cómo crear una ventana,
mostrar sprites, dibujar primitivas, recibir entradas de teclado y ratón,
reproducir sonidos e implementar detección de colisiones, estamos listos para
crear un juego gráfico en Pygame. El próximo capítulo combinará todos estos
elementos para crear el más avanzado de nuestros juegos hasta ahora.</span></p>

</div>

</body>

</html>
